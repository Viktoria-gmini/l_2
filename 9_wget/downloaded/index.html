<!DOCTYPE html>
<html lang="en">
    <head><script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app220.us.archive.org';v.server_ms=680;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="https://web-static.archive.org/_static/js/bundle-playback.js?v=t1Bf4PY_" charset="utf-8"></script>
<script type="text/javascript" src="https://web-static.archive.org/_static/js/wombat.js?v=txqj7nKC" charset="utf-8"></script>
<script>window.RufflePlayer=window.RufflePlayer||{};window.RufflePlayer.config={"autoplay":"on","unmuteOverlay":"hidden"};</script>
<script type="text/javascript" src="https://web-static.archive.org/_static/js/ruffle/ruffle.js"></script>
<script type="text/javascript">
  __wm.init("https://web.archive.org/web");
  __wm.wombat("https://systemdesign.one/system-design-interview-cheatsheet/","20240108015800","https://web.archive.org/","web","https://web-static.archive.org/_static/",
	      "1704679080");
</script>
<link rel="stylesheet" type="text/css" href="https://web-static.archive.org/_static/css/banner-styles.css?v=S1zqJCYt" />
<link rel="stylesheet" type="text/css" href="https://web-static.archive.org/_static/css/iconochive.css?v=qtvMKcIJ" />
<!-- End Wayback Rewrite JS Include -->

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp"/>
        <title>System Design Interview Cheat Sheet - System Design</title><meta name="Description" content="System Design Interview Questions"><meta property="og:title" content="System Design Interview Cheat Sheet"/>
<meta property="og:description" content="System Design Interview Questions"/>
<meta property="og:type" content="article"/>
<meta property="og:url" content="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/"/><meta property="og:image" content="https://web.archive.org/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/system-design-cheatsheet.webp"/><meta property="article:section" content="posts"/>
<meta property="article:published_time" content="2022-12-20T14:31:05+01:00"/>
<meta property="article:modified_time" content="2023-05-28T00:00:00+00:00"/><meta property="og:site_name" content="System Design"/>

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://web.archive.org/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/system-design-cheatsheet.webp"/>

<meta name="twitter:title" content="System Design Interview Cheat Sheet"/>
<meta name="twitter:description" content="System Design Interview Questions"/>
<meta name="application-name" content="System Design">
<meta name="apple-mobile-web-app-title" content="System Design"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/web/20240108015800im_/https://systemdesign.one/favicon.ico"/>
        <link rel="icon" type="image/png" sizes="32x32" href="/web/20240108015800im_/https://systemdesign.one/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/web/20240108015800im_/https://systemdesign.one/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/web/20240108015800im_/https://systemdesign.one/apple-touch-icon.png"><link rel="mask-icon" href="/web/20240108015800im_/https://systemdesign.one/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/web/20240108015800/https://systemdesign.one/site.webmanifest"><link rel="canonical" href="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/"/><link rel="prev" href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/"/><link rel="next" href="https://web.archive.org/web/20240108015800/https://systemdesign.one/software-engineer-interview-learning-resources/"/><link rel="stylesheet" href="/web/20240108015800cs_/https://systemdesign.one/css/style.min.css"><link rel="preload" href="/web/20240108015800/https://systemdesign.one/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/web/20240108015800cs_/https://systemdesign.one/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/web/20240108015800/https://systemdesign.one/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/web/20240108015800cs_/https://systemdesign.one/lib/animate/animate.min.css"></noscript><meta name="msvalidate.01" content="FD39F28F92F811F282452AC196AB113C"/><meta name="yandex-verification" content="b2096c1f054386e1"/><script type="application/ld+json">
    {
        "@context": "https://web.archive.org/web/20240108015800/http://schema.org",
        "@type": "BlogPosting",
        "headline": "System Design Interview Cheat Sheet",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/web.archive.org\/web\/20240108015800\/https:\/\/systemdesign.one\/system-design-interview-cheatsheet\/"
        },"genre": "posts","wordcount":  14671 ,
        "url": "https:\/\/web.archive.org\/web\/20240108015800\/https:\/\/systemdesign.one\/system-design-interview-cheatsheet\/","datePublished": "2022-12-20T14:31:05+01:00","dateModified": "2023-05-28T00:00:00+00:00","license": "CC BY-NC 4.0","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "NK"
            },"description": "System Design Interview Questions"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display:none;direction:ltr;">
<div id="wm-ipp" style="position:fixed;left:0;top:0;right:0;">
<div id="donato" style="position:relative;width:100%;">
  <div id="donato-base">
    <iframe id="donato-if" src="https://archive.org/includes/donate.php?as_page=1&amp;platform=wb&amp;referer=https%3A//web.archive.org/web/20240108015800/https%3A//systemdesign.one/system-design-interview-cheatsheet/"
	    scrolling="no" frameborder="0" style="width:100%; height:100%">
    </iframe>
  </div>
</div><div id="wm-ipp-inside">
  <div id="wm-toolbar" style="position:relative;display:flex;flex-flow:row nowrap;justify-content:space-between;">
    <div id="wm-logo" style="/*width:110px;*/padding-top:12px;">
      <a href="/web/" title="Wayback Machine home page"><img src="https://web-static.archive.org/_static/images/toolbar/wayback-toolbar-logo-200.png" srcset="https://web-static.archive.org/_static/images/toolbar/wayback-toolbar-logo-100.png, https://web-static.archive.org/_static/images/toolbar/wayback-toolbar-logo-150.png 1.5x, https://web-static.archive.org/_static/images/toolbar/wayback-toolbar-logo-200.png 2x" alt="Wayback Machine" style="width:100px" border="0" /></a>
    </div>
    <div class="c" style="display:flex;flex-flow:column nowrap;justify-content:space-between;flex:1;">
      <form class="u" style="display:flex;flex-direction:row;flex-wrap:nowrap;" target="_top" method="get" action="/web/submit" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="https://systemdesign.one/system-design-interview-cheatsheet/" onfocus="this.focus();this.select();" style="flex:1;"/><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20240108015800" /><input type="submit" value="Go" />
      </form>
      <div style="display:flex;flex-flow:row nowrap;align-items:flex-end;">
                <div class="s" id="wm-nav-captures" style="flex:1;">
          </div>
        <div class="k">
          <a href="" id="wm-graph-anchor">
            <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
              <canvas id="wm-sparkline-canvas" width="725" height="27" border="0"></canvas>
            </div>
          </a>
        </div>
      </div>
    </div>
    <div class="n">
      <table>
        <tbody>
          <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
          <tr class="m">
            <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20231127172837/https://systemdesign.one/system-design-interview-cheatsheet/" title="27 Nov 2023"><strong>Nov</strong></a></td>
            <td class="c" id="displayMonthEl" title="You are here: 01:58:00 Jan 08, 2024">JAN</td>
            <td class="f" nowrap="nowrap">Feb</td>
          </tr>
          <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
          <tr class="d">
            <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20240106183029/https://systemdesign.one/system-design-interview-cheatsheet/" title="18:30:29 Jan 06, 2024"><img src="https://web-static.archive.org/_static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a></td>
            <td class="c" id="displayDayEl" style="width:34px;font-size:22px;white-space:nowrap;" title="You are here: 01:58:00 Jan 08, 2024">08</td>
            <td class="f" nowrap="nowrap"><img src="https://web-static.archive.org/_static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0" /></td>
          </tr>
          <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
          <tr class="y">
            <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20230107111447/https://systemdesign.one/system-design-interview-cheatsheet/" title="07 Jan 2023"><strong>2023</strong></a></td>
            <td class="c" id="displayYearEl" title="You are here: 01:58:00 Jan 08, 2024">2024</td>
            <td class="f" nowrap="nowrap">2025</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="r" style="display:flex;flex-flow:column nowrap;align-items:flex-end;justify-content:space-between;">
      <div id="wm-btns" style="text-align:right;height:23px;">
                <span class="xxs">
          <div id="wm-save-snapshot-success">success</div>
          <div id="wm-save-snapshot-fail">fail</div>
          <a id="wm-save-snapshot-open" href="#" title="Share via My Web Archive" >
            <span class="iconochive-web"></span>
          </a>
          <a href="https://archive.org/account/login.php" title="Sign In" id="wm-sign-in">
            <span class="iconochive-person"></span>
          </a>
          <span id="wm-save-snapshot-in-progress" class="iconochive-web"></span>
        </span>
                <a class="xxs" href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine" style="top:-6px;"><span class="iconochive-question" style="color:rgb(87,186,244);font-size:160%;"></span></a>
        <a id="wm-tb-close" href="#close" style="top:-2px;" title="Close the toolbar"><span class="iconochive-remove-circle" style="color:#888888;font-size:240%;"></span></a>
      </div>
      <div id="wm-share" class="xxs">
        <a href="/web/20240108015800/http://web.archive.org/screenshot/https://systemdesign.one/system-design-interview-cheatsheet/"
           id="wm-screenshot"
           title="screenshot">
          <span class="wm-icon-screen-shot"></span>
        </a>
        <a href="#" id="wm-video" title="video">
          <span class="iconochive-movies"></span>
        </a>
        <a id="wm-share-facebook" href="#" data-url="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/" title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook" style="color:#3b5998;font-size:160%;"></span></a>
        <a id="wm-share-twitter" href="#" data-url="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/" title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter" style="color:#1dcaff;font-size:160%;"></span></a>
      </div>
      <div style="padding-right:2px;text-align:right;white-space:nowrap;">
        <a id="wm-expand" class="wm-btn wm-closed" href="#expand" onclick="__wm.ex(event);return false;"><span id="wm-expand-icon" class="iconochive-down-solid"></span> <span class="xxs" style="font-size:80%;">About this capture</span></a>
      </div>
    </div>
  </div>
    <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
        <div id="wm-capinfo-notice" source="api"></div>
                <div id="wm-capinfo-collected-by">
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
    <div style="padding:3px;position:relative" id="wm-collected-by-content">
      <div style="display:inline-block;vertical-align:top;width:49%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/save-page-now)"></span>
		<div>Collection: <a style="color:#33f;" href="https://archive.org/details/save-page-now" target="_new"><span class="wm-title">Save Page Now</span></a></div>
	      </div>
    </div>
    </div>
    <div id="wm-capinfo-timestamps">
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center" title="Timestamps for the elements of this page">TIMESTAMPS</div>
    <div>
      <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important"></div>
      <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img src="https://web-static.archive.org/_static/images/loading.gif" alt="loading" /></div>
    </div>
    </div>
  </div></div></div></div><div id="wm-ipp-print">The Wayback Machine - https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/</div>
<script type="text/javascript">//<![CDATA[
__wm.bt(725,27,25,2,"web","https://systemdesign.one/system-design-interview-cheatsheet/","20240108015800",1996,"https://web-static.archive.org/_static/",["https://web-static.archive.org/_static/css/banner-styles.css?v=S1zqJCYt","https://web-static.archive.org/_static/css/iconochive.css?v=qtvMKcIJ"], false);
  __wm.rw(1);
//]]></script>
<!-- END WAYBACK TOOLBAR INSERT -->
 <script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('light' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'light' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/web/20240108015800/https://systemdesign.one/" title="System Design">System Design</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" title="Newsletter" rel="noopener noreffer" target="_blank"> Join Newsletter </a><a class="menu-item" href="/web/20240108015800/https://systemdesign.one/categories/" title="Archive"> Archive </a><a class="menu-item" href="/web/20240108015800/https://systemdesign.one/about/" title="About"> About </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/web/20240108015800/https://systemdesign.one/" title="System Design">System Design</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" title="Newsletter" rel="noopener noreffer" target="_blank">Join Newsletter</a><a class="menu-item" href="/web/20240108015800/https://systemdesign.one/categories/" title="Archive">Archive</a><a class="menu-item" href="/web/20240108015800/https://systemdesign.one/about/" title="About">About</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
    <h2 class="toc-title">Contents</h2>
    <div class="toc-content" id="toc-content-auto"></div>
</div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">System Design Interview Cheat Sheet</h1><h2 class="single-subtitle">Ace the System Design Interview</h2><div class="post-meta">
        <div class="post-meta-line"><span class="post-author"><a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/about/" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>NK</a></span>&nbsp;<span class="post-category">included in <a href="/web/20240108015800/https://systemdesign.one/categories/deep-dive/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Deep Dive</a></span></div>
        <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2022-12-20">2022-12-20</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;14671 words&nbsp;
            <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;69 minutes&nbsp;</div>
    </div><div class="featured-image"><img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/system-design-cheatsheet.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/system-design-cheatsheet.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/system-design-cheatsheet.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/system-design-cheatsheet.webp 2x" data-sizes="auto" alt="/system-design-interview-cheatsheet/system-design-cheatsheet.webp" title="System Design Interview Questions" width="1014" height="662"/></div><div class="details toc" id="toc-static" data-kept="">
        <div class="details-summary toc-title">
            <span>Contents</span>
            <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#system-design-template">System Design Template</a>
      <ul>
        <li>
          <ul>
            <li><a href="#further-system-design-learning-resources">Further system design learning resources</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#data-store">Data Store</a>
      <ul>
        <li><a href="#sql">SQL</a>
          <ul>
            <li><a href="#insert-new-records-in-atable">Insert new records in a table</a>
              <ul>
                <li><a href="#insert-data-in-specific-columns">Insert data in specific columns</a></li>
                <li><a href="#insert-data-in-all-columns">Insert data in all columns</a></li>
              </ul>
            </li>
            <li><a href="#select-data-from-adatabase">Select data from a database</a>
              <ul>
                <li><a href="#select-all-columns-from-the-table">Select all columns from the table</a></li>
                <li><a href="#select-specific-columns-from-the-table">Select specific columns from the table</a></li>
                <li><a href="#select-records-that-fulfill-a-specific-condition">Select records that fulfill a specific condition</a></li>
                <li><a href="#sort-the-result-set-in-ascending-or-descending-order">Sort the result set in ascending or descending order</a></li>
              </ul>
            </li>
            <li><a href="#combine-records-from-two-or-more-tables-based-on-a-relatedcolumn">Combine records from two or more tables based on a related column</a>
              <ul>
                <li><a href="#select-the-records-that-have-matching-values-in-both-tables">Select the records that have matching values in both tables</a></li>
                <li><a href="#select-all-records-from-the-left-table-and-the-matched-records-from-the-right-table">Select all records from the left table, and the matched records from the right table</a></li>
                <li><a href="#select-all-records-from-the-right-table-and-the-matched-records-from-the-left-table">Select all records from the right table, and the matched records from the left table</a></li>
              </ul>
            </li>
            <li><a href="#group-rows-that-have-the-same-values-into-summaryrows">Group rows that have the same values into summary rows</a></li>
            <li><a href="#further-system-design-learning-resources-1">Further system design learning resources</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#architecture">Architecture</a>
      <ul>
        <li><a href="#pastebin">Pastebin</a>
          <ul>
            <li><a href="#requirements">Requirements</a></li>
            <li><a href="#data-storage">Data storage</a>
              <ul>
                <li><a href="#database-schema">Database schema</a></li>
                <li><a href="#type-of-data-store">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design">High-level design</a></li>
            <li><a href="#write-path">Write Path</a></li>
            <li><a href="#read-path">Read Path</a></li>
            <li><a href="#further-system-design-learning-resources-2">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#facebook-newsfeed">Facebook Newsfeed</a>
          <ul>
            <li><a href="#requirements-1">Requirements</a></li>
            <li><a href="#data-storage-1">Data storage</a>
              <ul>
                <li><a href="#database-schema-1">Database schema</a></li>
                <li><a href="#type-of-data-store-1">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-1">High-level design</a></li>
            <li><a href="#write-path-1">Write Path</a></li>
            <li><a href="#read-path-1">Read Path</a></li>
            <li><a href="#further-system-design-learning-resources-3">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#twitter-search">Twitter Search</a>
          <ul>
            <li><a href="#requirements-2">Requirements</a></li>
            <li><a href="#data-storage-2">Data storage</a>
              <ul>
                <li><a href="#database-schema-2">Database schema</a></li>
                <li><a href="#type-of-data-store-2">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-2">High-level design</a></li>
            <li><a href="#read-path-2">Read Path</a></li>
            <li><a href="#write-path-2">Write Path</a></li>
            <li><a href="#further-system-design-learning-resources-4">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#tagging-service">Tagging Service</a>
          <ul>
            <li><a href="#requirements-3">Requirements</a></li>
            <li><a href="#data-storage-3">Data storage</a>
              <ul>
                <li><a href="#database-schema-3">Database schema</a></li>
                <li><a href="#type-of-data-store-3">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-3">High-level design</a></li>
            <li><a href="#write-path-3">Write Path</a></li>
            <li><a href="#read-path-3">Read Path</a></li>
            <li><a href="#further-system-design-learning-resources-5">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#api-ratelimiter">API Rate Limiter</a>
          <ul>
            <li><a href="#requirements-4">Requirements</a></li>
            <li><a href="#data-storage-4">Data storage</a>
              <ul>
                <li><a href="#database-schema-4">Database schema</a></li>
                <li><a href="#type-of-data-store-4">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-4">High-level design</a></li>
            <li><a href="#throttling-type-and-algorithms">Throttling type and algorithms</a></li>
            <li><a href="#workflow">Workflow</a></li>
            <li><a href="#further-system-design-learning-resources-6">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#distributed-job-scheduler">Distributed Job Scheduler</a>
          <ul>
            <li><a href="#requirements-5">Requirements</a></li>
            <li><a href="#data-storage-5">Data storage</a>
              <ul>
                <li><a href="#database-schema-5">Database schema</a></li>
                <li><a href="#type-of-data-store-5">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-5">High-level design</a></li>
            <li><a href="#write-path-4">Write Path</a></li>
            <li><a href="#read-path-4">Read Path</a></li>
            <li><a href="#further-system-design-learning-resources-7">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#distributed-webcrawler">Distributed Web Crawler</a>
          <ul>
            <li><a href="#requirements-6">Requirements</a></li>
            <li><a href="#data-storage-6">Data storage</a>
              <ul>
                <li><a href="#database-schema-6">Database schema</a></li>
                <li><a href="#type-of-data-store-6">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-6">High-level design</a></li>
            <li><a href="#workflow-1">Workflow</a></li>
            <li><a href="#url-frontier">URL Frontier</a></li>
            <li><a href="#further-system-design-learning-resources-8">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#color-picker">Color Picker</a>
          <ul>
            <li><a href="#requirements-7">Requirements</a></li>
            <li><a href="#data-storage-7">Data storage</a>
              <ul>
                <li><a href="#database-schema-7">Database schema</a></li>
                <li><a href="#type-of-data-store-7">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-7">High-level design</a></li>
            <li><a href="#write-path-5">Write Path</a></li>
            <li><a href="#read-path-5">Read Path</a></li>
            <li><a href="#further-system-design-learning-resources-9">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#kanban-board">Kanban Board</a>
          <ul>
            <li><a href="#requirements-8">Requirements</a></li>
            <li><a href="#data-storage-8">Data storage</a>
              <ul>
                <li><a href="#database-schema-8">Database schema</a></li>
                <li><a href="#type-of-data-store-8">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-8">High-level design</a></li>
            <li><a href="#workflow-2">Workflow</a></li>
            <li><a href="#further-system-design-learning-resources-10">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#online-marketplace">Online Marketplace</a>
          <ul>
            <li><a href="#requirements-9">Requirements</a></li>
            <li><a href="#data-storage-9">Data storage</a>
              <ul>
                <li><a href="#database-schema-9">Database schema</a></li>
                <li><a href="#type-of-data-store-9">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-9">High-level design</a></li>
            <li><a href="#write-path-6">Write Path</a></li>
            <li><a href="#read-path-6">Read Path</a></li>
            <li><a href="#further-system-design-learning-resources-11">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#chat-service">Chat Service</a>
          <ul>
            <li><a href="#requirements-10">Requirements</a></li>
            <li><a href="#data-storage-10">Data storage</a>
              <ul>
                <li><a href="#database-schema-10">Database schema</a></li>
                <li><a href="#type-of-data-store-10">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-10">High-level design</a></li>
            <li><a href="#workflow-3">Workflow</a></li>
            <li><a href="#further-system-design-learning-resources-12">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#proximity-service">Proximity Service</a>
          <ul>
            <li><a href="#requirements-11">Requirements</a></li>
            <li><a href="#data-storage-11">Data storage</a>
              <ul>
                <li><a href="#database-schema-11">Database schema</a></li>
                <li><a href="#type-of-data-store-11">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-11">High-level design</a></li>
            <li><a href="#write-path-7">Write Path</a></li>
            <li><a href="#read-path-7">Read Path</a></li>
            <li><a href="#further-system-design-learning-resources-13">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#ride-hailing-service">Ride-Hailing Service</a>
          <ul>
            <li><a href="#requirements-12">Requirements</a></li>
            <li><a href="#data-storage-12">Data storage</a>
              <ul>
                <li><a href="#database-schema-12">Database schema</a></li>
                <li><a href="#type-of-data-store-12">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-12">High-level design</a></li>
            <li><a href="#write-path-8">Write Path</a></li>
            <li><a href="#read-path-8">Read Path</a></li>
            <li><a href="#further-system-design-learning-resources-14">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#google-maps">Google Maps</a>
          <ul>
            <li><a href="#requirements-13">Requirements</a></li>
            <li><a href="#data-storage-13">Data storage</a>
              <ul>
                <li><a href="#database-schema-13">Database schema</a></li>
                <li><a href="#type-of-data-store-13">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-13">High-level design</a></li>
            <li><a href="#points-ofinterest">Points of Interest</a></li>
            <li><a href="#estimated-time-ofarrival">Estimated Time of Arrival</a></li>
            <li><a href="#further-system-design-learning-resources-15">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#youtube">YouTube</a>
          <ul>
            <li><a href="#requirements-14">Requirements</a></li>
            <li><a href="#data-storage-14">Data storage</a>
              <ul>
                <li><a href="#database-schema-14">Database schema</a></li>
                <li><a href="#type-of-data-store-14">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-14">High-level design</a></li>
            <li><a href="#video-upload-workflow">Video upload workflow</a></li>
            <li><a href="#video-streaming-workflow">Video streaming workflow</a></li>
            <li><a href="#further-system-design-learning-resources-16">Further system design learning resources</a></li>
          </ul>
        </li>
        <li><a href="#dropbox">Dropbox</a>
          <ul>
            <li><a href="#requirements-15">Requirements</a></li>
            <li><a href="#data-storage-15">Data storage</a>
              <ul>
                <li><a href="#database-schema-15">Database schema</a></li>
                <li><a href="#type-of-data-store-15">Type of data store</a></li>
              </ul>
            </li>
            <li><a href="#high-level-design-15">High-level design</a></li>
            <li><a href="#upload-workflow">Upload workflow</a></li>
            <li><a href="#download-workflow">Download workflow</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#support">Support</a></li>
    <li><a href="#what-to-learn-next">What to learn next?</a></li>
    <li><a href="#license">License</a></li>
    <li><a href="#useful-resources">Useful Resources</a></li>
  </ul>
</nav></div>
    </div><div class="content" id="content"><p><em>Disclaimer: The system design questions are subjective. This cheat sheet is a work in progress and is written based on my research on the topic. Feel free to share your feedback and suggestions in the comments.</em>
<em>Some of the linked resources are affiliates. As an Amazon Associate, I earn from qualifying purchases.</em></p>
<hr>
<hr>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h2 id="system-design-template">System Design Template</h2>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Requirements</strong></td>
<td>Functional Requirements</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Non-Functional Requirements</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Daily Active Users</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Read-to-Write Ratio</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Usage Patterns</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Peak and Seasonal Events</td>
<td></td>
</tr>
<tr>
<td><strong>Database</strong></td>
<td>Data Model</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Entity Relationship Diagram</td>
<td></td>
</tr>
<tr>
<td></td>
<td>SQL</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Type of Database</td>
<td></td>
</tr>
<tr>
<td><strong>API Design</strong></td>
<td>HTTP Verb</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Request-Response Headers</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Request-Response Contract</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Data format</td>
<td>JSON</td>
</tr>
<tr>
<td></td>
<td></td>
<td>XML</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Protocol Buffer</td>
</tr>
<tr>
<td><strong><a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/back-of-the-envelope" target="_blank" rel="noopener noreffer ">Capacity Planning</a></strong></td>
<td>Query Per Second (Read-Write)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Bandwidth (Read-Write)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Storage</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Memory</td>
<td>Cache (80-20 Rule)</td>
</tr>
<tr>
<td><strong>High Level Design</strong></td>
<td>Basic Algorithm</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Data Flow</td>
<td>Read-Write Scenario</td>
</tr>
<tr>
<td></td>
<td>Tradeoffs</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Alternatives</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Network Protocols</td>
<td>TCP</td>
</tr>
<tr>
<td></td>
<td></td>
<td>UDP</td>
</tr>
<tr>
<td></td>
<td></td>
<td>REST</td>
</tr>
<tr>
<td></td>
<td></td>
<td>RPC</td>
</tr>
<tr>
<td></td>
<td></td>
<td>WebSocket</td>
</tr>
<tr>
<td></td>
<td></td>
<td>SSE</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Long Polling</td>
</tr>
<tr>
<td></td>
<td>Cloud Patterns</td>
<td>CQRS</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Publish-Subscribe</td>
</tr>
<tr>
<td></td>
<td>Serverless Functions</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Data Structures</td>
<td>CRDT</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Trie</td>
</tr>
<tr>
<td><strong>Design Deep Dive</strong></td>
<td>Single Point of Failures</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Bottlenecks (Hot spots)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Concurrency</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Distributed Transactions</td>
<td>Two-Phase Commit</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Sagas</td>
</tr>
<tr>
<td></td>
<td>Probabilistic Data Structures</td>
<td><a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/bloom-filters-explained/" target="_blank" rel="noopener noreffer ">Bloom Filter</a></td>
</tr>
<tr>
<td></td>
<td></td>
<td>HyperLogLog</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Count-Min Sketch</td>
</tr>
<tr>
<td></td>
<td>Coordination Service</td>
<td>Zookeeper</td>
</tr>
<tr>
<td></td>
<td>Logging</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Monitoring</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Alerting</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Tracing</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Deployment</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Security</td>
<td>Authorization</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Authentication</td>
</tr>
<tr>
<td></td>
<td>Consensus Algorithms</td>
<td>Raft</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Paxos</td>
</tr>
<tr>
<td><strong>Components</strong></td>
<td>DNS</td>
<td></td>
</tr>
<tr>
<td></td>
<td><a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/cdn-explained" target="_blank" rel="noopener noreffer ">CDN</a></td>
<td>Push-Pull</td>
</tr>
<tr>
<td></td>
<td>Load Balancer</td>
<td>Layer 4-7</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Active-Active</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Active-Passive</td>
</tr>
<tr>
<td></td>
<td>Reverse Proxy</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Application Layer</td>
<td>Microservice-Monolith</td>
</tr>
<tr>
<td></td>
<td></td>
<td><a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/what-is-service-discovery/" target="_blank" rel="noopener noreffer ">Service Discovery</a></td>
</tr>
<tr>
<td></td>
<td>SQL Data Store</td>
<td>Leader-Follower</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Leader-Leader</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Indexing</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Federation</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Sharding</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Denormalization</td>
</tr>
<tr>
<td></td>
<td></td>
<td>SQL Tuning</td>
</tr>
<tr>
<td></td>
<td>NoSQL Data Store</td>
<td>Graph</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Document</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Key-Value</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Wide-Column</td>
</tr>
<tr>
<td></td>
<td>Message Queue</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Task Queue</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Cache</td>
<td>Query-Object Level</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Client</td>
</tr>
<tr>
<td></td>
<td></td>
<td>CDN</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Webserver</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Database</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Application</td>
</tr>
<tr>
<td></td>
<td>Cache Update Pattern</td>
<td>Cache Aside</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Read Through</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Write Through</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Write Behind</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Refresh Ahead</td>
</tr>
<tr>
<td></td>
<td>Cache Eviction Policy</td>
<td>LRU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>LFU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>FIFO</td>
</tr>
<tr>
<td></td>
<td>Clocks</td>
<td>Physical clock</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Lamport clock (logical)</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Vector clock</td>
</tr>
</tbody>
</table>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h2 id="data-store">Data Store</h2>
<h3 id="sql">SQL</h3>
<p>The most popular SQL queries asked in system design interviews are SELECT, JOIN, INSERT, and GROUP BY statements.</p>
<h4 id="insert-new-records-in-atable">Insert new records in a table</h4>
<h5 id="insert-data-in-specific-columns">Insert data in specific columns</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="k">table_name</span><span class="w"> </span><span class="p">(</span><span class="n">column_1</span><span class="p">,</span><span class="w"> </span><span class="n">column_2</span><span class="p">,</span><span class="w"> </span><span class="p">..)</span><span class="w">
</span><span class="w"></span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="n">value_1</span><span class="p">,</span><span class="w"> </span><span class="n">value_2</span><span class="p">,</span><span class="w"> </span><span class="p">..);</span></code></pre></td></tr></table>
</div>
</div>
<h5 id="insert-data-in-all-columns">Insert data in all columns</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="k">table_name</span><span class="w">
</span><span class="w"></span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="n">value_1</span><span class="p">,</span><span class="w"> </span><span class="n">value_2</span><span class="p">,</span><span class="w"> </span><span class="p">..);</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="select-data-from-adatabase">Select data from a database</h4>
<h5 id="select-all-columns-from-the-table">Select all columns from the table</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="k">table_name</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
<h5 id="select-specific-columns-from-the-table">Select specific columns from the table</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="n">column_1</span><span class="p">,</span><span class="w"> </span><span class="n">column_2</span><span class="p">,</span><span class="w"> </span><span class="p">..</span><span class="w">
</span><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="k">table_name</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
<h5 id="select-records-that-fulfill-a-specific-condition">Select records that fulfill a specific condition</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="n">column_1</span><span class="p">,</span><span class="w"> </span><span class="n">column_2</span><span class="p">,</span><span class="w"> </span><span class="p">..</span><span class="w">
</span><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="k">table_name</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">condition</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
<h5 id="sort-the-result-set-in-ascending-or-descending-order">Sort the result set in ascending or descending order</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="n">column_1</span><span class="p">,</span><span class="w"> </span><span class="n">column_2</span><span class="p">,</span><span class="w"> </span><span class="p">..</span><span class="w">
</span><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="k">table_name</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">condition</span><span class="w">
</span><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="k">column_name</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">ASC</span><span class="o">|</span><span class="k">DESC</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="combine-records-from-two-or-more-tables-based-on-a-relatedcolumn">Combine records from two or more tables based on a related column</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/SQL/sql-join.webp" title="SQL Join" data-thumbnail="/system-design-interview-cheatsheet/SQL/sql-join.webp" data-sub-html="<h2>SQL Join</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/SQL/sql-join.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/SQL/sql-join.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/SQL/sql-join.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/SQL/sql-join.webp 2x" data-sizes="auto" alt="SQL Join" width="1085" height="344"/>
    </a><figcaption class="image-caption">SQL Join</figcaption>
    </figure>
<h5 id="select-the-records-that-have-matching-values-in-both-tables">Select the records that have matching values in both tables</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="err">\</span><span class="o">*</span><span class="w">
</span><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">table_1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">t_1</span><span class="w">
</span><span class="w"></span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">table_2</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">t_2</span><span class="w">
</span><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">t_1</span><span class="p">.</span><span class="n">column_x</span><span class="o">=</span><span class="n">t_2</span><span class="p">.</span><span class="n">column_x</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
<h5 id="select-all-records-from-the-left-table-and-the-matched-records-from-the-right-table">Select all records from the left table, and the matched records from the right table</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="k">column_name</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">table_1</span><span class="w">
</span><span class="w"></span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">table_2</span><span class="w">
</span><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">table_1</span><span class="p">.</span><span class="k">column_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">table_2</span><span class="p">.</span><span class="k">column_name</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
<h5 id="select-all-records-from-the-right-table-and-the-matched-records-from-the-left-table">Select all records from the right table, and the matched records from the left table</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="k">column_name</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">table_1</span><span class="w">
</span><span class="w"></span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">table_2</span><span class="w">
</span><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">table_1</span><span class="p">.</span><span class="k">column_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">table_2</span><span class="p">.</span><span class="k">column_name</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="group-rows-that-have-the-same-values-into-summaryrows">Group rows that have the same values into summary rows</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="k">column_name</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="k">table_name</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">condition</span><span class="w">
</span><span class="w"></span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="k">column_name</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="k">column_name</span><span class="p">(</span><span class="n">s</span><span class="p">);</span></code></pre></td></tr></table>
</div>
</div>
<p>The following <strong>aggregate functions</strong> are used with the GROUP BY statement to group the result set by one or more columns:</p>
<ul>
<li>COUNT()</li>
<li>MAX()</li>
<li>MIN()</li>
<li>SUM()</li>
<li>AVG()</li>
</ul>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-1">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h2 id="architecture">Architecture</h2>
<p>Software architecture is about making reasonable trade-offs. The general guidelines to horizontally <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/aws-scale" target="_blank" rel="noopener noreffer ">scale a service</a> are the following:</p>
<ul>
<li>keep the service stateless</li>
<li>partition the service</li>
<li>replicate the service</li>
</ul>
<p>The <strong>learning resources that I recommend to prepare for a software engineering interview</strong> can be found <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/software-engineer-interview-learning-resources/" target="_blank" rel="noopener noreffer ">here</a>.</p>
<hr>
<hr>
<hr>
<h3 id="pastebin">Pastebin</h3>
<p>You can read the detailed article on <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-pastebin/" target="_blank" rel="noopener noreffer ">system design pastebin</a>. Similar services: GitHub gist</p>
<hr>
<h4 id="requirements">Requirements</h4>
<ul>
<li>The client must be able to upload text data and receive a unique URL</li>
<li>The received URL is used to access the text data</li>
</ul>
<hr>
<h4 id="data-storage">Data storage</h4>
<h5 id="database-schema">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/pastebin/pastebin-db-schema.webp" title="Pastebin; Database schema" data-thumbnail="/system-design-interview-cheatsheet/pastebin/pastebin-db-schema.webp" data-sub-html="<h2>Pastebin; Database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/pastebin/pastebin-db-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/pastebin/pastebin-db-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/pastebin/pastebin-db-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/pastebin/pastebin-db-schema.webp 2x" data-sizes="auto" alt="Pastebin; Database schema" width="1155" height="248"/>
    </a><figcaption class="image-caption">Pastebin; Database schema</figcaption>
    </figure>
<ul>
<li>The primary entities of the database are the Pastes table, the Users table</li>
<li>The relationship between the Users and the Pastes tables is 1-to-many</li>
</ul>
<h5 id="type-of-data-store">Type of data store</h5>
<ul>
<li>The content of a paste is stored in a managed object storage such as AWS S3</li>
<li>A SQL database such as Postgres or MySQL is used to store the metadata (paste URL) of the paste</li>
</ul>
<hr>
<h4 id="high-level-design">High-level design</h4>
<ol>
<li>The server generates a unique paste identifier (<strong>ID</strong>) for each new paste</li>
<li>The server encodes the paste ID for readability</li>
<li>The server persists the paste ID in the metadata store and the paste in the object storage</li>
<li>When the client enters the paste ID, the server returns the paste</li>
</ol>
<hr>
<h4 id="write-path">Write Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/pastebin/pastebin-write-path.webp" title="Pastebin; Write Path" data-thumbnail="/system-design-interview-cheatsheet/pastebin/pastebin-write-path.webp" data-sub-html="<h2>Pastebin; Write Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/pastebin/pastebin-write-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/pastebin/pastebin-write-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/pastebin/pastebin-write-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/pastebin/pastebin-write-path.webp 2x" data-sizes="auto" alt="Pastebin; Write Path" width="1328" height="721"/>
    </a><figcaption class="image-caption">Pastebin; Write Path</figcaption>
    </figure>
<ol>
<li>The client makes an HTTP connection to the server</li>
<li>Writes to Pastebin are <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/rate-limiter" target="_blank" rel="noopener noreffer ">rate limited</a></li>
<li>Key Generation Service (<strong>KGS</strong>) creates a unique encoded paste ID</li>
<li>The object storage returns a presigned URL</li>
<li>The paste URL (<a href="https://web.archive.org/web/20240108015800/http://presigned-url/paste-id">http://presigned-url/paste-id</a>) is created by appending the generated paste ID to the suffix of the presigned URL</li>
<li>The paste content is transferred directly from the client to the object storage using the paste URL to optimize bandwidth expenses and performance</li>
<li>The object storage persists the paste using the paste URL</li>
<li>The metadata of the paste including the paste URL is persisted in the SQL database</li>
<li>The server returns the paste ID to the client for future access</li>
</ol>
<hr>
<h4 id="read-path">Read Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/pastebin/pastebin-read-path.webp" title="Pastebin; Read Path" data-thumbnail="/system-design-interview-cheatsheet/pastebin/pastebin-read-path.webp" data-sub-html="<h2>Pastebin; Read Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/pastebin/pastebin-read-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/pastebin/pastebin-read-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/pastebin/pastebin-read-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/pastebin/pastebin-read-path.webp 2x" data-sizes="auto" alt="Pastebin; Read Path" width="1209" height="965"/>
    </a><figcaption class="image-caption">Pastebin; Read Path</figcaption>
    </figure>
<ol>
<li>The client executes a DNS query to identify the server</li>
<li>The CDN is queried to verify if the requested paste is in the CDN cache</li>
<li>The client makes an HTTP connection to the load balancer or the reverse proxy server</li>
<li>The read requests are rate limited</li>
<li>The load balancer delegates the client connection to the server with free capacity</li>
<li>The server verifies if the paste exists by querying the <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/bloom-filters-explained/" target="_blank" rel="noopener noreffer ">bloom filter</a></li>
<li>If the paste exists, check if the paste is stored in the cache server</li>
<li>Fetch the metadata for the paste from the SQL database</li>
<li>Fetch the paste content from the object storage using the metadata</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-2">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="facebook-newsfeed">Facebook Newsfeed</h3>
<p>The keywords <em>newsfeed</em> and <em>timeline</em> are used interchangeably. Some of the similar services to Facebook Newsfeed are the following:</p>
<ul>
<li>Twitter Timeline</li>
<li>Instagram feed</li>
<li>Google podcast feed</li>
<li>Google news timeline</li>
<li>Etsy feed</li>
<li>Feedly</li>
<li>Reddit feed</li>
<li>Medium feed</li>
<li>Quora feed</li>
</ul>
<hr>
<h4 id="requirements-1">Requirements</h4>
<ul>
<li>The user newsfeed must be generated in near real-time based on the feed activity from the people that a user follows</li>
<li>The feed items contain text and media files (images, videos)</li>
</ul>
<hr>
<h4 id="data-storage-1">Data storage</h4>
<h5 id="database-schema-1">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/facebook-timeline-db-erd.webp" title="Facebook Newsfeed; Database schema" data-thumbnail="/system-design-interview-cheatsheet/newsfeed/facebook-timeline-db-erd.webp" data-sub-html="<h2>Facebook Newsfeed; Database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/newsfeed/facebook-timeline-db-erd.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/facebook-timeline-db-erd.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/facebook-timeline-db-erd.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/facebook-timeline-db-erd.webp 2x" data-sizes="auto" alt="Facebook Newsfeed; Database schema" width="1525" height="666"/>
    </a><figcaption class="image-caption">Facebook Newsfeed; Database schema</figcaption>
    </figure>
<ul>
<li>The primary entities of the database are the Users table, the FeedItems table, and the Follows table</li>
<li>The relationship between the Users and the FeedItems tables is 1-to-many</li>
<li>The relationship between the Users and the Follows tables is many-to-many</li>
<li>The Follows is a join table to represent the relationship (follower-followee) between the users</li>
</ul>
<h5 id="type-of-data-store-1">Type of data store</h5>
<ul>
<li>The media files (images, videos) are stored in a managed object storage such as AWS S3</li>
<li>A SQL database such as Postgres stores the metadata of the user (followers, personal data)</li>
<li>A NoSQL data store such as Cassandra stores the user timeline</li>
<li>A cache server such as Redis stores the pre-generated timeline of a user</li>
</ul>
<hr>
<h4 id="high-level-design-1">High-level design</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/home-timeline.webp" title="Facebook Newsfeed; Home timeline" data-thumbnail="/system-design-interview-cheatsheet/newsfeed/home-timeline.webp" data-sub-html="<h2>Facebook Newsfeed; Home timeline</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/newsfeed/home-timeline.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/home-timeline.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/home-timeline.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/home-timeline.webp 2x" data-sizes="auto" alt="Facebook Newsfeed; Home timeline" width="1021" height="364"/>
    </a><figcaption class="image-caption">Facebook Newsfeed; Home timeline</figcaption>
    </figure>
<ol>
<li>The server stores the feed items in cache servers and the NoSQL store</li>
<li>The newsfeed generated is stored on the cache server</li>
<li>There is no feed publishing for inactive users but uses a pull model (fanout-on-load)</li>
<li>The feed publishing for active non-celebrity users is based on a push model (fanout-on-write)</li>
<li>The feed publishing for celebrity users is based on a hybrid push-pull model</li>
<li>The client fetches the newsfeed from the cache servers</li>
</ol>
<hr>
<h4 id="write-path-1">Write Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/facebook-newsfeed-write-path.webp" title="Facebook Newsfeed; Write Path" data-thumbnail="/system-design-interview-cheatsheet/newsfeed/facebook-newsfeed-write-path.webp" data-sub-html="<h2>Facebook Newsfeed; Write Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/newsfeed/facebook-newsfeed-write-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/facebook-newsfeed-write-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/facebook-newsfeed-write-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/facebook-newsfeed-write-path.webp 2x" data-sizes="auto" alt="Facebook Newsfeed; Write Path" width="1424" height="1053"/>
    </a><figcaption class="image-caption">Facebook Newsfeed; Write Path</figcaption>
    </figure>
<ol>
<li>The client creates an HTTP connection to the load balancer to create a feed item</li>
<li>The write requests to create feed items are rate limited</li>
<li>The load balancer delegates the client connection to a web server with free capacity</li>
<li>The feed item is stored on the message queue for asynchronous processing and the client receives an immediate response</li>
<li>The fanout service distributes the feed item to multiple services to generate the newsfeed for followers of the client</li>
<li>The object store persists the video or image files embedded in the feed item</li>
<li>The NoSQL store persists the timeline of users (feed items in reverse chronological order)</li>
<li>The SQL database stores the metadata of the users (user relationships) and the feed items</li>
<li>A limited number of feed items for users with a certain threshold of followers are stored on the cache server</li>
<li>The IDs of feed items are stored on the user timeline cache server for deduplication</li>
<li>The feed generation service subscribes to the fanout service for any updates</li>
<li>The feed generation service queries the in-memory user info service to identify the followers of a user and the category of a user (active non-celebrity users, inactive, celebrity users)</li>
<li>The feed generation service creates the home timeline for active non-celebrity users using a push model (fanout-on-write) in linear time O(n), where n is the number of followers</li>
<li>The feed items are ranked, sorted, and merged to generate the home timeline for a user</li>
<li>The home timeline for active users is stored on the cache server for quick lookups</li>
<li>There is no feed publishing for inactive users but uses a pull model (fanout-on-load)</li>
<li>The feed publishing for celebrity users is based on a hybrid push-pull model (merge celebrity feed items to the home timeline of a user on demand)</li>
<li>As an alternative, the feed publishing for celebrity users can use a push model only for the online followers in batches (not optimal solution)</li>
</ol>
<hr>
<h4 id="read-path-1">Read Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/facebook-newsfeed-read-path.webp" title="Facebook Newsfeed; Read Path" data-thumbnail="/system-design-interview-cheatsheet/newsfeed/facebook-newsfeed-read-path.webp" data-sub-html="<h2>Facebook Newsfeed; Read Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/newsfeed/facebook-newsfeed-read-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/facebook-newsfeed-read-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/facebook-newsfeed-read-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/newsfeed/facebook-newsfeed-read-path.webp 2x" data-sizes="auto" alt="Facebook Newsfeed; Read Path" width="1377" height="1053"/>
    </a><figcaption class="image-caption">Facebook Newsfeed; Read Path</figcaption>
    </figure>
<ol>
<li>The client executes a DNS query to resolve the domain name</li>
<li>The client queries the CDN to check if the feed items for the home timeline are cached on the <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/cdn-explained" target="_blank" rel="noopener noreffer ">CDN</a></li>
<li>The client creates an HTTP connection to the load balancer</li>
<li>The read requests to fetch the newsfeed are rate limited</li>
<li>The load balancer delegates the client connection to a web server with free capacity</li>
<li>The web server queries the timeline service to fetch the newsfeed</li>
<li>The timeline service queries the user info service to get the list of followee and identify the category of the user (active, inactive, following celebrities)</li>
<li>The home timeline cache is queried to fetch the list of feed item IDs</li>
<li>The feed items are fetched from the feed items cache server by executing an MGET operation on Redis</li>
<li>When the client executes a request to fetch the timeline of another user, the timeline service queries the user timeline cache server</li>
<li>The SQL database follower (replica) is queried on a <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/caching-patterns" target="_blank" rel="noopener noreffer ">cache</a> miss</li>
<li>The media files embedded on feed items are fetched from the object store</li>
<li>The NoSQL data store is queried to fetch the user timeline on a cache miss</li>
<li>The inactive users fetch the home timeline using a pull model (fanout-on-load)</li>
<li>The active users following celebrity users use a hybrid model to fetch the home timeline (the feed items from celebrities are merged on demand)</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-3">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="twitter-search">Twitter Search</h3>
<p>Some of the similar services to Twitter Search are the following:</p>
<ul>
<li>Facebook Search</li>
<li>YouTube search</li>
<li>Reddit search</li>
<li><a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/levels-fyi-google-sheets" target="_blank" rel="noopener noreffer ">Google</a> news search</li>
</ul>
<hr>
<h4 id="requirements-2">Requirements</h4>
<ul>
<li>Persist user status</li>
<li>Query user status in near real-time</li>
</ul>
<hr>
<h4 id="data-storage-2">Data storage</h4>
<h5 id="database-schema-2">Database schema</h5>
<p>A positional inverted index is used to store the index.</p>
<h5 id="type-of-data-store-2">Type of data store</h5>
<ul>
<li>The archived data objects are stored on HDFS</li>
<li>Lucene-based inverted index data store such as Apache Solr or Elasticsearch is used to store index data</li>
</ul>
<hr>
<h4 id="high-level-design-2">High-level design</h4>
<ol>
<li>The fanout service queries the real-time index and the archive index to identify the relevant data objects</li>
<li>The fanout service queries the social graph service and user search service to filter the result data objects further</li>
</ol>
<hr>
<h4 id="read-path-2">Read Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/twitter-search/twitter-search-architecture.webp" title="Twitter search; Read Path" data-thumbnail="/system-design-interview-cheatsheet/twitter-search/twitter-search-architecture.webp" data-sub-html="<h2>Twitter search; Read Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/twitter-search/twitter-search-architecture.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/twitter-search/twitter-search-architecture.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/twitter-search/twitter-search-architecture.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/twitter-search/twitter-search-architecture.webp 2x" data-sizes="auto" alt="Twitter search; Read Path" width="1146" height="940"/>
    </a><figcaption class="image-caption">Twitter search; Read Path</figcaption>
    </figure>
<ol>
<li>The client establishes an HTTP connection to the search server, which parses and tokenizes the search query</li>
<li>The search server delegates the search request to the fanout service</li>
<li>The fanout service queries the real-time index to identify the relevant most recent data objects</li>
<li>The fanout service queries the cache server to verify if the relevant archive index data is on the cache</li>
<li>The fanout service queries the archive index to identify the relevant archived data objects</li>
<li>The fanout service queries the social graph service to filter the result data objects by identifying the most relevant data objects to the user</li>
<li>The fanout service queries the user search service to further filter the result data object by applying personalization based on the user search history</li>
<li>The result data objects are merged by the fanout service and returned to the client</li>
<li>Wait-free concurrency model with optimistic locking (the search index is updated while being read at the same time) is implemented to achieve high throughput for the search service</li>
<li>RPC is used for internal communication between the system components to improve latency</li>
</ol>
<hr>
<h4 id="write-path-2">Write Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/twitter-search/twitter-search-write-path.webp" title="Twitter search; Write Path" data-thumbnail="/system-design-interview-cheatsheet/twitter-search/twitter-search-write-path.webp" data-sub-html="<h2>Twitter search; Write Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/twitter-search/twitter-search-write-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/twitter-search/twitter-search-write-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/twitter-search/twitter-search-write-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/twitter-search/twitter-search-write-path.webp 2x" data-sizes="auto" alt="Twitter search; Write Path" width="1146" height="808"/>
    </a><figcaption class="image-caption">Twitter search; Write Path</figcaption>
    </figure>
<ol>
<li>The real-time stream is analyzed using Apache Flink to generate an in-memory Lucene index</li>
<li>The real-time index keeps data that is at most a few weeks old</li>
<li>MapReduce (Hadoop) jobs are executed on archive data objects stored on HDFS</li>
<li>The Lucene-based archive index is stored on the SSD</li>
<li>The Lucene-based user search service is updated depending on the search history of the user</li>
<li>The multithreading in search service is implemented through a single writer thread and multiple reader threads</li>
</ol>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/twitter-search/twitter-search-update.webp" title="Twitter search; Updating the index" data-thumbnail="/system-design-interview-cheatsheet/twitter-search/twitter-search-update.webp" data-sub-html="<h2>Twitter search; Updating the index</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/twitter-search/twitter-search-update.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/twitter-search/twitter-search-update.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/twitter-search/twitter-search-update.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/twitter-search/twitter-search-update.webp 2x" data-sizes="auto" alt="Twitter search; Updating the index" width="1057" height="456"/>
    </a><figcaption class="image-caption">Twitter search; Updating the index</figcaption>
    </figure>
<p>When the client updates or deletes any published data object, the server updates the real-time index and archive index.</p>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-4">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="tagging-service">Tagging Service</h3>
<p>Some of the popular tagging services are the following:</p>
<ul>
<li>JIRA tags</li>
<li>Confluence tags</li>
<li>Stackoverflow tags</li>
<li>Twitter hashtags</li>
</ul>
<hr>
<h4 id="requirements-3">Requirements</h4>
<ul>
<li>Tag an item</li>
<li>View the items with a specific tag in near real-time</li>
<li>Scalable</li>
</ul>
<hr>
<h4 id="data-storage-3">Data storage</h4>
<h5 id="database-schema-3">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/tagging-service/tagging-service-db-schema.webp" title="Tagging service; Database schema" data-thumbnail="/system-design-interview-cheatsheet/tagging-service/tagging-service-db-schema.webp" data-sub-html="<h2>Tagging service; Database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/tagging-service/tagging-service-db-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/tagging-service/tagging-service-db-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/tagging-service/tagging-service-db-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/tagging-service/tagging-service-db-schema.webp 2x" data-sizes="auto" alt="Tagging service; Database schema" width="951" height="205"/>
    </a><figcaption class="image-caption">Tagging service; Database schema</figcaption>
    </figure>
<ul>
<li>The primary entities of the database are the Tags table, the Items table, and the Tags_Items table</li>
<li>The Tags_Items is a join table to represent the relationship between the Items and the Tags</li>
<li>The relationship between the Tags and the Items tables is many-to-many</li>
</ul>
<h5 id="type-of-data-store-3">Type of data store</h5>
<ul>
<li>The media files (images, videos) and text files are stored in a managed object storage such as AWS S3</li>
<li>A SQL database such as Postgres stores the metadata on the relationship between tags and items</li>
<li>A NoSQL data store such as MongoDB stores the metadata of the item</li>
<li>A cache server such as Redis stores the popular tags and items</li>
</ul>
<hr>
<h4 id="high-level-design-3">High-level design</h4>
<ol>
<li>When a new item is tagged, the metadata is stored on the SQL database</li>
<li>The popular tags and items are cached on dedicated cache servers to improve latency</li>
<li>The non-popular tags and items are fetched by querying the read replicas of SQL and NoSQL data stores</li>
</ol>
<hr>
<h4 id="write-path-3">Write Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/tagging-service/tagging-service-write-path.webp" title="Tagging service; Write Path" data-thumbnail="/system-design-interview-cheatsheet/tagging-service/tagging-service-write-path.webp" data-sub-html="<h2>Tagging service; Write Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/tagging-service/tagging-service-write-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/tagging-service/tagging-service-write-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/tagging-service/tagging-service-write-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/tagging-service/tagging-service-write-path.webp 2x" data-sizes="auto" alt="Tagging service; Write Path" width="1178" height="1053"/>
    </a><figcaption class="image-caption">Tagging service; Write Path</figcaption>
    </figure>
<ol>
<li>The client makes an HTTP connection to the load balancer</li>
<li>The write requests to create an item or tag an item are rate limited</li>
<li>The load balancer delegates the client request to a web server with free capacity</li>
<li>The write requests are stored on the message queue for asynchronous processing and improved fault tolerance</li>
<li>The fanout service distributes the write request to multiple services to tag an item</li>
<li>The object store persists the text files or media files embedded in an item</li>
<li>The NoSQL data store persists the metadata of an item (comments, upvotes, published date)</li>
<li>The SQL database persists metadata on the relationship between tags and items</li>
<li>The tags info service is queried to identify the popular tags</li>
<li>If the item was tagged with a popular tag, the item is stored on the items cache server</li>
<li>The tags cache server stores the IDs of items that were tagged with popular tags</li>
<li>LRU cache is used to evict the cache servers</li>
<li>The data objects (items and tags) are replicated across data centers at the web server level to save bandwidth</li>
</ol>
<hr>
<h4 id="read-path-3">Read Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/tagging-service/tagging-service-read-path.webp" title="Tagging service; Read Path" data-thumbnail="/system-design-interview-cheatsheet/tagging-service/tagging-service-read-path.webp" data-sub-html="<h2>Tagging service; Read Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/tagging-service/tagging-service-read-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/tagging-service/tagging-service-read-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/tagging-service/tagging-service-read-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/tagging-service/tagging-service-read-path.webp 2x" data-sizes="auto" alt="Tagging service; Read Path" width="1135" height="1064"/>
    </a><figcaption class="image-caption">Tagging service; Read Path</figcaption>
    </figure>
<ol>
<li>The client executes a DNS query to resolve the domain name</li>
<li>The client queries the CDN to check if the tag data is cached on the CDN</li>
<li>The client creates an HTTP connection to the load balancer</li>
<li>The read requests to fetch the tags or items are rate limited</li>
<li>The load balancer delegates the client request to a web server with free capacity</li>
<li>The web server queries the tags service to fetch the tags</li>
<li>The tags service queries the tags info service to identify if the requested tag is popular</li>
<li>The lists of tagged items for a popular tag are fetched from the tags cache server</li>
<li>The tags service executes an MGET Redis request to fetch the relevant tagged items from the items cache server</li>
<li>The list of items tagged with non-popular tags is fetched from the read replicas of the SQL database</li>
<li>The items tagged with non-popular tags are fetched from the read replicas of the NoSQL data store</li>
<li>The media files embedded in an item are fetched from the object store</li>
<li>The trie data structure is used for typeahead autosuggestion for search queries on tags</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-5">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="api-ratelimiter">API Rate Limiter</h3>
<p>The Internet-scale distributed systems implement an API rate limiter for high availability and security.</p>
<hr>
<h4 id="requirements-4">Requirements</h4>
<ul>
<li>Throttle requests exceeding the rate limit</li>
<li>Distributed <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/rate-limiter" target="_blank" rel="noopener noreffer ">rate limiter</a></li>
</ul>
<hr>
<h4 id="data-storage-4">Data storage</h4>
<h5 id="database-schema-4">Database schema</h5>
<p>The NoSQL document store such as MongoDB is used to store the rate limiting rules and the throttled data</p>
<h5 id="type-of-data-store-4">Type of data store</h5>
<ul>
<li>The NoSQL document store such as MongoDB stores the rate-limiting rules and the throttled data</li>
<li>The <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/caching-patterns" target="_blank" rel="noopener noreffer ">cache</a> server such as Redis stores the rate-limiting rules and throttling data in-memory for faster lookups</li>
<li>The message queue stores the dropped requests for analytics and auditing purposes</li>
</ul>
<hr>
<h4 id="high-level-design-4">High-level design</h4>
<ul>
<li>The cookie, user ID, or IP address is used to identify the client</li>
<li>The rate limiter drops the request and returns the status code &ldquo;429 too many requests&rdquo; to the client if the throttling threshold is exceeded</li>
<li>The rate limiter delegates the request to the API server if the throttling threshold is not exceeded</li>
</ul>
<hr>
<h4 id="throttling-type-and-algorithms">Throttling type and algorithms</h4>
<table>
<thead>
<tr>
<th>Throttling type</th>
<th>Algorithms</th>
</tr>
</thead>
<tbody>
<tr>
<td>Soft throttle</td>
<td><ul><li>fixed window</li><li>token bucket</li></ul></td>
</tr>
<tr>
<td>Hard throttle</td>
<td><ul><li>sliding window</li><li>sliding window with counter</li><li>leaking bucket</li></ul></td>
</tr>
<tr>
<td>Dynamic throttle</td>
<td>all of the above with an additional system query to check for free resources</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="workflow">Workflow</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/rate-limiter/API-rate-limiter.webp" title="API Rate Limiter" data-thumbnail="/system-design-interview-cheatsheet/rate-limiter/API-rate-limiter.webp" data-sub-html="<h2>API Rate Limiter</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/rate-limiter/API-rate-limiter.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/rate-limiter/API-rate-limiter.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/rate-limiter/API-rate-limiter.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/rate-limiter/API-rate-limiter.webp 2x" data-sizes="auto" alt="API Rate Limiter" width="1048" height="886"/>
    </a><figcaption class="image-caption">API Rate Limiter</figcaption>
    </figure>
<ol>
<li>The client creates an HTTP connection to the web server</li>
<li>The web server forwards the request to the rate limiter service</li>
<li>The rate limiter service queries the rules cache to check the rate limit rule for the requested API endpoint</li>
<li>The read replicas of rules NoSQL data store are queried on a cache miss to identify the rate limit rule</li>
<li>The distributed lock such as Redis lock is used to handle concurrency when the same user makes multiple requests at the same time in a distributed system</li>
<li>The rate limiter service queries the throttle cache to verify if the throttle threshold is exceeded</li>
<li>The throttle cache uses a write-behind (write-back) cache pattern by storing the throttle data on the message queue to improve the latency</li>
<li>The throttle sync service executes a batch operation to store the throttle data on the message queue to the NoSQL document store</li>
<li>The NoSQL document stores persist the throttle data for fault tolerance, long-living rate limits, analytics, and auditing</li>
<li>The dropped requests (throttle threshold exceeded) are stored on the message queue for analytics and auditing</li>
<li>If the client request is not exceeding the throttle limit, the rate limiter delegates the client request to the API server</li>
<li>LRU cache eviction is used for cache servers</li>
<li>HTTP response headers indicate the relevant throttle limit data</li>
<li><a href="/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" rel="">Consistent hashing</a> is used to redirect the request from a user to the same subset of servers</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-6">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="distributed-job-scheduler">Distributed Job Scheduler</h3>
<p>The keywords <em>job</em> and <em>task</em> are used interchangeably. Some of the popular job schedulers are the following:</p>
<ul>
<li>Apache Airflow</li>
<li>Cron</li>
</ul>
<hr>
<h4 id="requirements-5">Requirements</h4>
<ul>
<li>Schedule and execute one-time or recurring jobs</li>
<li>The job status and execution logs must be searchable</li>
<li>The job scheduler is distributed</li>
</ul>
<hr>
<h4 id="data-storage-5">Data storage</h4>
<h5 id="database-schema-5">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-db-schema.webp" title="Task scheduler; Database schema" data-thumbnail="/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-db-schema.webp" data-sub-html="<h2>Task scheduler; Database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-db-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-db-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-db-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-db-schema.webp 2x" data-sizes="auto" alt="Task scheduler; Database schema" width="809" height="195"/>
    </a><figcaption class="image-caption">Task scheduler; Database schema</figcaption>
    </figure>
<ul>
<li>The primary entities of the database are the Users table and the Tasks table</li>
<li>The relationship between the Users and the Tasks tables is 1-to-many</li>
<li>A database index must be created on the execution time of the tasks in the Tasks table to improve the latency of task execution</li>
</ul>
<h5 id="type-of-data-store-5">Type of data store</h5>
<ul>
<li>The binary executable files of the tasks are stored in a managed object storage such as AWS S3</li>
<li>The message queue such as Apache Kafka is used as a dead-letter queue and for deduplication of task execution requests</li>
<li>The cache server such as Redis keeps the next immediate tasks to be executed in a min-heap data structure based on the task execution time</li>
<li>The SQL database such as Postgres stores the task metadata</li>
<li>The NoSQL data store such as Cassandra stores the task execution logs and task failure logs</li>
<li>Apache Zookeeper is used for <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/what-is-service-discovery/" target="_blank" rel="noopener noreffer ">service discovery</a></li>
</ul>
<hr>
<h4 id="high-level-design-5">High-level design</h4>
<ol>
<li>The task scheduler triages the tasks based on the execution time of the task and keeps the next immediate tasks on the task cache</li>
<li>The task scheduler stores the metadata of all tasks on the SQL database</li>
<li>The task executor fetches the next immediate task from the task cache and the worker node executes the task</li>
<li>The task execution logs are stored on the NoSQL data store</li>
</ol>
<hr>
<h4 id="write-path-4">Write Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-write-path.webp" title="Task scheduler; Task scheduling workflow" data-thumbnail="/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-write-path.webp" data-sub-html="<h2>Task scheduler; Task scheduling workflow</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-write-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-write-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-write-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-write-path.webp 2x" data-sizes="auto" alt="Task scheduler; Task scheduling workflow" width="1034" height="526"/>
    </a><figcaption class="image-caption">Task scheduler; Task scheduling workflow</figcaption>
    </figure>
<ol>
<li>The client creates an HTTP connection to the web server to schedule a task</li>
<li>The binary executable file of the task is stored on the object store using the presigned URL</li>
<li>The message queue stores the metadata of the task for asynchronous processing and fault tolerance</li>
<li>The task scheduler triages the tasks based on the execution time and assigns a unique ID to the scheduled task</li>
<li>If the execution time of the new task is within the next hour, the task is stored on the task cache as well as on the SQL database</li>
<li>The metadata of the tasks are persisted on the SQL database for durability and fault tolerance</li>
<li>If the execution time of the new task is within the next hour, the task executor is notified using the message queue publish-subscribe pattern</li>
<li>Task cache implements a min-heap data structure based on the execution time of the task using the Redis sorted set</li>
<li>The min-heap data structure on the task cache allows logarithmic time complexity O(log n) for the scheduling and execution of tasks and constant time complexity O(1) for checking the execution time of the next immediate task</li>
<li>The task executor runs periodically (every half an hour) to update the task cache with the next immediate tasks on the SQL database</li>
<li>LRU cache eviction is used for the task cache</li>
</ol>
<hr>
<h4 id="read-path-4">Read Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-read-path.webp" title="Task scheduler; Task execution workflow" data-thumbnail="/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-read-path.webp" data-sub-html="<h2>Task scheduler; Task execution workflow</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-read-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-read-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-read-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/distributed-job-scheduler/task-scheduler-read-path.webp 2x" data-sizes="auto" alt="Task scheduler; Task execution workflow" width="1617" height="904"/>
    </a><figcaption class="image-caption">Task scheduler; Task execution workflow</figcaption>
    </figure>
<ol>
<li>The task executor queries the task cache to fetch the next immediate task at the top of the min-heap</li>
<li>On failover, the task executor queries the SQL database replicas to fetch the next immediate task to be executed</li>
<li>The task executor persists the next immediate tasks on the message queue</li>
<li>Worker nodes fetch the metadata of the next immediate tasks on the message queue through the publish-subscribe pattern</li>
<li>The binary executable file of the task on the object store is fetched</li>
<li>The task execution log is stored on the message queue for asynchronous processing</li>
<li>The log aggregator service processes the execution logs</li>
<li>The task execution logs are persisted on the NoSQL data store</li>
<li>The metadata of failed tasks are stored on the dead-letter message queue for further analysis</li>
<li>The alerting service is notified of the failure and the failure detection service further processes the failed task data</li>
<li>The logs of the failed tasks are stored on the NoSQL data store</li>
<li>The client creates an HTTP connection to the web server to view the status of a task</li>
<li>The web server delegates the request to the task status service</li>
<li>The task status queries the task cache to view the status of an ongoing task</li>
<li>The task status queries the SQL database to view the status of an executed task</li>
<li>The task status queries the NoSQL data store to view the execution logs of a task</li>
<li>The task status queries the NoSQL data store to view the logs of a failed task</li>
<li>The system components such as the worker nodes send regular heartbeats to Apache Zookeeper for fault tolerance</li>
<li>The task cache uses the write-behind (write-back) caching pattern to persist the task status on the SQL database</li>
<li>Multithreading is implemented to parallelize and increase the throughput across a single machine</li>
<li>The <a href="https://web.archive.org/web/20240108015800/https://learn.microsoft.com/en-us/windows/win32/sync/condition-variables" target="_blank" rel="noopener noreffer ">condition variable</a> must be implemented on the task executor service to wake up the thread when the execution time of the next immediate task has elapsed</li>
<li>Atomic clocks can be used to synchronize the system time across worker nodes</li>
<li>Database rows must be locked by the task executor service to prevent the distribution of the same task to multiple task executor instances</li>
<li>The task executor must acquire a lock or a semaphore on the task cache data structure to prevent the distribution of the same task to multiple task executor instances</li>
<li>The task cache can be partitioned using <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">consistent hashing</a> (key = minute of the execution time)</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-7">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="distributed-webcrawler">Distributed Web Crawler</h3>
<p>Some of the popular distributed web crawlers are the following:</p>
<ul>
<li>Google bot</li>
<li>Bing bot</li>
<li>Apache Nutch</li>
</ul>
<hr>
<h4 id="requirements-6">Requirements</h4>
<ul>
<li>An automated web crawler to crawl through the HTML files on the internet</li>
<li>The web crawler is distributed</li>
<li>The web crawler must start crawling from a set of seed webpages</li>
<li>The web crawler must be polite to websites (obey the robots.txt file)</li>
</ul>
<hr>
<h4 id="data-storage-6">Data storage</h4>
<h5 id="database-schema-6">Database schema</h5>
<ul>
<li>The content store persists the document IDs and document content</li>
<li>The seed URL store persists a list of seed URLs</li>
<li>The URL store persists the list of URLs to crawl and the source URLs</li>
</ul>
<h5 id="type-of-data-store-6">Type of data store</h5>
<ul>
<li>The URL storage persists an extracted list of URLs on a NoSQL data store such as HBase or HDFS</li>
<li>The crawled content is stored in a managed object storage such as AWS S3 or on a NoSQL data store such as Apache HBase or Cassandra</li>
<li>DNS persists domain names and the IP addresses</li>
<li>The seed URL storage persists a list of seed URLs on a NoSQL data store such as Cassandra or HDFS</li>
<li>The message queue such as Apache Kafka is used as the dead-letter queue</li>
<li>The cache server such as Redis keeps the fresh crawled documents in memory for quicker processing</li>
<li>The NoSQL data store such as Cassandra or an object store such as AWS S3 stores the content of crawled web pages</li>
<li>Apache Zookeeper is used for <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/what-is-service-discovery/" target="_blank" rel="noopener noreffer ">service discovery</a></li>
</ul>
<hr>
<h4 id="high-level-design-6">High-level design</h4>
<p>At a high level, the web crawler executes steps 2 and 3 repeatedly.</p>
<ol>
<li>The fetcher service crawls the URLs on the seed store</li>
<li>The extracted outlinks (URLs) on the crawled website are stored on the URL store</li>
<li>The fetcher service crawls the URLs on the URL store</li>
<li>The crawler uses the BFS algorithm</li>
</ol>
<hr>
<h4 id="workflow-1">Workflow</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/web-crawler/distributed-web-crawler.webp" title="Distributed web crawler" data-thumbnail="/system-design-interview-cheatsheet/web-crawler/distributed-web-crawler.webp" data-sub-html="<h2>Distributed web crawler</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/web-crawler/distributed-web-crawler.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/web-crawler/distributed-web-crawler.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/web-crawler/distributed-web-crawler.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/web-crawler/distributed-web-crawler.webp 2x" data-sizes="auto" alt="Distributed web crawler" width="1745" height="598"/>
    </a><figcaption class="image-caption">Distributed web crawler</figcaption>
    </figure>
<ol>
<li>The URL frontier queries the seed URL storage to fetch a list of URLs to be crawled</li>
<li>The URL frontier prioritizes the URLs to be crawled</li>
<li>The fetcher service queries the scheduler service to check if the URL has a predefined crawl schedule</li>
<li>The local DNS service is queried to identify the IP address of the origin server</li>
<li>The fetcher service server-side renders the web pages</li>
<li>The duplicate check service is queried to check for duplicate content on the web page</li>
<li>The fetcher service compresses the crawled web page and stores it on the content store for further processing such as building an inverted index</li>
<li>The fetcher service stores the crawled web page on the content cache for immediate processing</li>
<li>The fetcher service publishes the document ID to the message queue for asynchronous processing of the crawled web pages</li>
<li>The URL processor is informed about the crawled web page using the publish-subscribe pattern</li>
<li>The URLs are extracted, filtered, and normalized from the crawled web page by querying the content cache</li>
<li>The extracted URLs are stored on the URL storage for future crawling</li>
<li>The URL frontier queries the URL storage to fetch the URLs to crawl</li>
<li>The services sent heartbeat signals to the Apache zookeeper for improved fault tolerance</li>
<li>Only limited HTTP connections are created to an origin server to improve the politeness of the crawler</li>
<li>The local DNS service is used to improve latency</li>
<li>The URL frontier uses message queues to prioritize the URLs to be crawled and improve the politeness of the crawler</li>
<li>The fetcher service is multi-threaded to concurrently crawl multiple webpages</li>
<li>The fetcher service performs server-side rendering of the web pages to handle the dynamic web pages</li>
<li>The URL extractor, URL filter, and URL normalizer service runs on Apache Spark (MapReduce) jobs to improve throughput</li>
<li>The publish-subscribe pattern among services is implemented using the message queue</li>
<li>The message queue implements the backpressure pattern to improve the fault tolerance</li>
<li>The duplicate check service uses the simhash algorithm to detect the similarity in the content on the web pages</li>
<li><a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">Consistent hashing</a> is used to partition the content cache (key = document ID)</li>
<li>The read replicas of the content cache serve the latest documents for further processing</li>
<li>RPC is used for internal communication to improve latency</li>
<li>The stateful services are periodically checkpointed to improve the fault tolerance</li>
<li>The sitemap.xml file is used by the webmaster to inform the web crawler about the URLs on a website that is available for crawling</li>
<li>The robots.txt file is used by the webmaster to inform the web crawler about which portions of the website the crawler is allowed to visit</li>
<li>The web pages are fetched and parsed in stream jobs using Apache Flink to improve throughput</li>
<li>The web pages are ranked and further processed in batch jobs on Apache Spark</li>
<li>The <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/bloom-filters-explained/" target="_blank" rel="noopener noreffer ">bloom filter</a> is used by the URL processor (extract, filter, normalizer) to verify if the URL was crawled earlier</li>
<li>The fetcher service skips crawling the non-canonical URLs but instead crawls the related canonical links</li>
<li>The Apache Gora is used as an SQL wrapper for querying the NoSQL data store</li>
<li>The Apache Tika is used to detect and parse multiple document formats</li>
<li>The web pages that return a 4XX or 5XX status code are excluded from crawling retries</li>
<li>The redirect pages are crawled on the HTTP 3XX response status code</li>
<li>The scheduler service returns a fixed or adaptive schedule based on the sitemap.xml file definition</li>
<li>The user-agent HTTP header in the request is set to the name of the crawler</li>
<li>The web crawler is distributed geographically to keep the crawler closer to the origin servers of the website to improve latency</li>
<li>The storage services are distributed and replicated for durability</li>
</ol>
<hr>
<h4 id="url-frontier">URL Frontier</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/web-crawler/web-crawler-url-frontier.webp" title="Distributed web crawler; URL frontier" data-thumbnail="/system-design-interview-cheatsheet/web-crawler/web-crawler-url-frontier.webp" data-sub-html="<h2>Distributed web crawler; URL frontier</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/web-crawler/web-crawler-url-frontier.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/web-crawler/web-crawler-url-frontier.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/web-crawler/web-crawler-url-frontier.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/web-crawler/web-crawler-url-frontier.webp 2x" data-sizes="auto" alt="Distributed web crawler; URL frontier" width="1571" height="835"/>
    </a><figcaption class="image-caption">Distributed web crawler; URL frontier</figcaption>
    </figure>
<p>The prioritizer service puts the URLs based on the priority in distinct message queues. The online page importance calculation (OPIC) or link rank is used to assign priority to the URLs. <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">Consistent hashing</a> can be used to distribute the URLs across message queues.</p>
<p>The priority selector service fetches the URLs on the high-priority queue and puts the URLs of a specific website on a single message queue for sequential crawling. Sequential crawling improves the politeness of the crawler.</p>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-8">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="color-picker">Color Picker</h3>
<h4 id="requirements-7">Requirements</h4>
<ul>
<li>The user can pick a few colors and save the colors in a favorite list</li>
<li>The user can update the favorite colors list</li>
<li>The user can share the favorite list of colors with other users through email</li>
<li>The user can define the access control list (users who can view) on the favorite list</li>
</ul>
<hr>
<h4 id="data-storage-7">Data storage</h4>
<h5 id="database-schema-7">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-sql-database-schema.webp" title="Color picker; SQL database schema" data-thumbnail="/system-design-interview-cheatsheet/color-picker/color-picker-sql-database-schema.webp" data-sub-html="<h2>Color picker; SQL database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/color-picker/color-picker-sql-database-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-sql-database-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-sql-database-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-sql-database-schema.webp 2x" data-sizes="auto" alt="Color picker; SQL database schema" width="1474" height="554"/>
    </a><figcaption class="image-caption">Color picker; SQL database schema</figcaption>
    </figure>
<ul>
<li>The primary entities are the colors, users, and permissions table</li>
<li>The favorite_list is a join table between the colors and users table</li>
<li>The relationship between the colors and users tables is many-to-many</li>
</ul>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-nosql-schema.webp" title="Color picker; NoSQL database schema" data-thumbnail="/system-design-interview-cheatsheet/color-picker/color-picker-nosql-schema.webp" data-sub-html="<h2>Color picker; NoSQL database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/color-picker/color-picker-nosql-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-nosql-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-nosql-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-nosql-schema.webp 2x" data-sizes="auto" alt="Color picker; NoSQL database schema" width="918" height="346"/>
    </a><figcaption class="image-caption">Color picker; NoSQL database schema</figcaption>
    </figure>
<ul>
<li>The favorite list of colors and permissions are stored in a list data type</li>
<li>The metadata of colors (hex code, color name) and users are stored as the object data type</li>
</ul>
<h5 id="type-of-data-store-7">Type of data store</h5>
<ul>
<li>The NoSQL document store such as MongoDB is used assuming there is no requirement to support transactions</li>
<li>The Apache Gora is used as an SQL wrapper for querying the MongoDB</li>
<li>Apache Zookeeper is used for <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/what-is-service-discovery/" target="_blank" rel="noopener noreffer ">service discovery</a></li>
</ul>
<hr>
<h4 id="high-level-design-7">High-level design</h4>
<ol>
<li>The favorite list of colors is stored on the data store</li>
<li>The user shares the favorite list with other users using the generated URL</li>
<li>The server verifies if the current user is granted permission to view the favorite list</li>
<li>The cache servers are queried to retrieve the favorite list</li>
<li>On a cache miss, the data store is queried to retrieve the favorite list of colors</li>
</ol>
<hr>
<h4 id="write-path-5">Write Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-write-path.webp" title="Color picker; Write Path" data-thumbnail="/system-design-interview-cheatsheet/color-picker/color-picker-write-path.webp" data-sub-html="<h2>Color picker; Write Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/color-picker/color-picker-write-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-write-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-write-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-write-path.webp 2x" data-sizes="auto" alt="Color picker; Write Path" width="953" height="616"/>
    </a><figcaption class="image-caption">Color picker; Write Path</figcaption>
    </figure>
<ol>
<li>The client creates an HTTP connection to the load balancer</li>
<li>Write requests to update the favorite list are rate limited</li>
<li>The load balancer delegates the write request to a server with free capacity</li>
<li>The server persists the favorite list of colors on the data store (leader)</li>
<li><a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">Consistent hashing</a> is used to partition the data store (key = user ID)</li>
<li>The data is replicated across multiple data centers at the write server level</li>
<li>The load balancer is configured in the active-passive mode for high availability</li>
</ol>
<hr>
<h4 id="read-path-5">Read Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-read-path.webp" title="Color picker; Read Path" data-thumbnail="/system-design-interview-cheatsheet/color-picker/color-picker-read-path.webp" data-sub-html="<h2>Color picker; Read Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/color-picker/color-picker-read-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-read-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-read-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/color-picker/color-picker-read-path.webp 2x" data-sizes="auto" alt="Color picker; Read Path" width="1408" height="888"/>
    </a><figcaption class="image-caption">Color picker; Read Path</figcaption>
    </figure>
<ol>
<li>The client executes a DNS query to identify the IP address of the server</li>
<li>The CDN is queried to check if the requested favorite list is in the CDN cache</li>
<li>The client makes an HTTP connection to the load balancer</li>
<li>The read requests for viewing the favorite list are rate limited</li>
<li>The load balancer delegates the client request to a server with free capacity</li>
<li>The server queries the favorite colors service to fetch the favorite list</li>
<li>The favorite colors service queries the user info service to verify if the client was granted permission to access the favorite list</li>
<li>The favorite list cache is queried to fetch the list of color IDs of the favorite list</li>
<li>The favorite colors service executes an MGET Redis request to fetch the color metadata using color IDs on the colors cache</li>
<li>On a cache miss, the read replicas (followers) of the data store are queried to fetch the favorite list</li>
<li><a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">Consistent hashing</a> is used to partition the favorite list cache server (key = user ID)</li>
<li>The read replicas (followers) of cache servers are queried to fetch the favorite list of colors</li>
<li>A reasonable TTL must be set on the cache servers to invalidate the data</li>
<li>When the user updates an existing favorite list of colors, the cache servers must be flushed for the data invalidation</li>
<li>The cache aside pattern is used to populate the cache</li>
<li>The LRU policy is used to evict the cache servers</li>
<li>The user info service is an in-memory store of user permissions for quick access</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-9">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="kanban-board">Kanban Board</h3>
<p>Some of the popular implementations of a Kanban board are the following:</p>
<ul>
<li>Trello</li>
<li>JIRA board</li>
<li>Microsoft Planner</li>
<li>Asana board</li>
</ul>
<hr>
<h4 id="requirements-8">Requirements</h4>
<ul>
<li>The user can create lists and assign tasks on the Kanban board</li>
<li>The user can see changes on the Kanban board in near real-time</li>
<li>The user can make offline changes on the Kanban board</li>
<li>The Kanban board is distributed</li>
</ul>
<hr>
<h4 id="data-storage-8">Data storage</h4>
<h5 id="database-schema-8">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/kanban-board/kanban-board-database-schema.webp" title="Kanban board; Database schema" data-thumbnail="/system-design-interview-cheatsheet/kanban-board/kanban-board-database-schema.webp" data-sub-html="<h2>Kanban board; Database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/kanban-board/kanban-board-database-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/kanban-board/kanban-board-database-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/kanban-board/kanban-board-database-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/kanban-board/kanban-board-database-schema.webp 2x" data-sizes="auto" alt="Kanban board; Database schema" width="895" height="172"/>
    </a><figcaption class="image-caption">Kanban board; Database schema</figcaption>
    </figure>
<ul>
<li>The primary entities are the boards, the lists, and the tasks tables</li>
<li>The relationship between the boards and lists tables is 1-to-many</li>
<li>The relationship between the lists and tasks tables is 1-to-many</li>
<li>An additional table is created to track the versions of the board</li>
</ul>
<h5 id="type-of-data-store-8">Type of data store</h5>
<ul>
<li>Document store such as MongoDB persists the metadata of the tasks for improved denormalization support (ability to query and index subfields of the document)</li>
<li>The transient data (board activity level) is stored on the cache server such as Redis</li>
<li>The download queue for board activity is implemented using a message queue such as Apache Kafka</li>
</ul>
<hr>
<h4 id="high-level-design-8">High-level design</h4>
<ol>
<li>The changes on the Kanban board are synchronized in real-time through a WebSocket connection</li>
<li>The offline client synchronizes the delta of changes when connectivity is reacquired</li>
</ol>
<hr>
<h4 id="workflow-2">Workflow</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/kanban-board/kanban-board-architecture.webp" title="Kanban board; Architecture" data-thumbnail="/system-design-interview-cheatsheet/kanban-board/kanban-board-architecture.webp" data-sub-html="<h2>Kanban board; Architecture</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/kanban-board/kanban-board-architecture.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/kanban-board/kanban-board-architecture.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/kanban-board/kanban-board-architecture.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/kanban-board/kanban-board-architecture.webp 2x" data-sizes="auto" alt="Kanban board; Architecture" width="847" height="676"/>
    </a><figcaption class="image-caption">Kanban board; Architecture</figcaption>
    </figure>
<ol>
<li>The client-A creates a <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/WebSocket" target="_blank" rel="noopener noreffer ">WebSocket</a> connection on the load balancer to push changes in real-time</li>
<li>The load balancer (<a href="https://web.archive.org/web/20240108015800/http://www.haproxy.org/" target="_blank" rel="noopener noreffer ">HAProxy</a>) uses the round-robin algorithm to delegate the client connection to a web socket server with free capacity</li>
<li>The changes on the Kanban board are persisted on the document store</li>
<li><a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">Consistent hashing</a> (key = board ID) is used to delegate the WebSocket connection to the relevant publish-subscribe (pub-sub) server</li>
<li>The pub-sub server (Apache Kafka) delegates the WebSocket connection to the subscribed web socket servers</li>
<li>The web socket server fetches the changes on the document store</li>
<li>The WebSocket connection can make a duplex communication to the other listening clients through the load balancer</li>
<li>The client-B receives the changes on the Kanban board</li>
<li>The cache server stores the transient metadata such as the activity level of a session or the temporary authentication key</li>
<li>The download queue to replay the changes in the sequential order (message ordering) is implemented using a message queue</li>
<li>The changes are asynchronously propagated to the followers (replicas) of the document store to achieve eventual <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistency-patterns/" target="_blank" rel="noopener noreffer ">consistency</a></li>
<li>The CDN serves the single-page dynamic application to the client to improve latency</li>
<li>The single-page application is cached on the browser to improve the latency of the subsequent requests</li>
<li>An event-driven architecture might be a good choice for the instant propagation of updates</li>
<li>The client invokes the server logic through a thin wrapper over a WebSocket connection</li>
<li>LRU policy is used to evict the cache servers</li>
<li>The document store makes it relatively trivial to run different versions of the Kanban board against the same database without major DB schema migrations</li>
<li>The document store is replicated using the leader-follower topology</li>
<li>The online clients fetch the changes from the leader document store</li>
<li>The offline clients fetch the changes from the followers of the document store</li>
<li>The offline clients store the time-stamped changeset locally and send the delta of the changeset when the connectivity is reacquired</li>
<li>The changeset is replayed in sequential order (message ordering) to prevent data hierarchy failures</li>
<li>The client synchronizes only the recently viewed and the starred boards to improve the performance</li>
<li>A new TCP WebSocket must be established on the server failure</li>
<li>The last-write-win policy is used to resolve conflicts on the board</li>
<li>Exponential backoff must be implemented on the synchronization service to improve the fault tolerance</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-10">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="online-marketplace">Online Marketplace</h3>
<p>The popular implementations of an online marketplace are the following:</p>
<ul>
<li>Amazon</li>
<li>eBay</li>
<li>Shopee</li>
<li>TicketMaster</li>
<li><a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/what-is-critical-rendering-path" target="_blank" rel="noopener noreffer ">Airbnb</a></li>
</ul>
<hr>
<h4 id="requirements-9">Requirements</h4>
<ul>
<li>The user can create an inventory of products in the store</li>
<li>The users can search for products on the storefront</li>
<li>The user can make the payment to purchase a product on the storefront</li>
</ul>
<hr>
<h4 id="data-storage-9">Data storage</h4>
<h5 id="database-schema-9">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/online-martketplace/online-marketplace-database-schema.webp" title="Online Marketplace; Database schema" data-thumbnail="/system-design-interview-cheatsheet/online-martketplace/online-marketplace-database-schema.webp" data-sub-html="<h2>Online Marketplace; Database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/online-martketplace/online-marketplace-database-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/online-martketplace/online-marketplace-database-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/online-martketplace/online-marketplace-database-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/online-martketplace/online-marketplace-database-schema.webp 2x" data-sizes="auto" alt="Online Marketplace; Database schema" width="873" height="274"/>
    </a><figcaption class="image-caption">Online Marketplace; Database schema</figcaption>
    </figure>
<ul>
<li>The primary entities are the inventory, the tickets (products), the users, the payments, and the purchase orders tables</li>
<li>The relationship between the inventory and the tickets table is 1-to-many</li>
<li>The relationship between the purchase orders and the tickets table is 1-to-many</li>
<li>The relationship between the users and the purchase orders table is 1-to-many</li>
<li>The relationship between the purchase orders and the payments table is 1-to-1</li>
</ul>
<h5 id="type-of-data-store-9">Type of data store</h5>
<ul>
<li>Document store such as MongoDB persists unstructured data like the inventory and the tickets data</li>
<li>Document store such as Splunk persists the logs for observability</li>
<li>SQL database such as Postgres persists the purchase orders, payments information, and users metadata for ACID compliance</li>
<li>An object store such as AWS S3 is used to store media files (images, videos) related to the tickets</li>
<li>A cache server such as Redis is used to store the transient data (session data and trending tickets)</li>
<li>Message queue such as Apache Kafka temporarily stores the logs for asynchronous processing</li>
<li>Lucene-based inverted index data store such as Apache Solr is used to store index data for search functionality</li>
</ul>
<hr>
<h4 id="high-level-design-9">High-level design</h4>
<ul>
<li>The purchase of a ticket is executed as a two-phase commit</li>
<li>The materialized conflict or the distributed lock is used to handle concurrency when multiple users try to buy the same unique ticket</li>
<li>The inverted index store provides the search functionality</li>
<li>The high-profile events might put users into a virtual waiting room before they can view the ticket listings to improve fairness</li>
</ul>
<hr>
<h4 id="write-path-6">Write Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/online-martketplace/online-marketplace-write-path.webp" title="Online Marketplace; Write Path" data-thumbnail="/system-design-interview-cheatsheet/online-martketplace/online-marketplace-write-path.webp" data-sub-html="<h2>Online Marketplace; Write Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/online-martketplace/online-marketplace-write-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/online-martketplace/online-marketplace-write-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/online-martketplace/online-marketplace-write-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/online-martketplace/online-marketplace-write-path.webp 2x" data-sizes="auto" alt="Online Marketplace; Write Path" width="1124" height="362"/>
    </a><figcaption class="image-caption">Online Marketplace; Write Path</figcaption>
    </figure>
<ol>
<li>The bulk service stores the <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/protocol-buffers-vs-json" target="_blank" rel="noopener noreffer ">JSON</a> metadata files of the inventory and the related media files on the object store</li>
<li>The bulk service puts the metadata on the message queue for an asynchronous processing</li>
<li>The aggregation service is notified through the publish-subscribe pattern</li>
<li>The aggregation service queries the object store to fetch the JSON files</li>
<li>The aggregation service validates, normalizes the JSON data, and stores the transformed data on the inventory data store</li>
<li>The indexing service executes a batch fetch operation on the inventory data store</li>
<li>The indexing service transforms and stores the fetched data on the inverted index store</li>
<li>The ads service queries the inventory data store to display advertisements to the users</li>
</ol>
<hr>
<h4 id="read-path-6">Read Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/online-martketplace/online-marketplace-read-path.webp" title="Online Marketplace; Read Path" data-thumbnail="/system-design-interview-cheatsheet/online-martketplace/online-marketplace-read-path.webp" data-sub-html="<h2>Online Marketplace; Read Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/online-martketplace/online-marketplace-read-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/online-martketplace/online-marketplace-read-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/online-martketplace/online-marketplace-read-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/online-martketplace/online-marketplace-read-path.webp 2x" data-sizes="auto" alt="Online Marketplace; Read Path" width="1663" height="672"/>
    </a><figcaption class="image-caption">Online Marketplace; Read Path</figcaption>
    </figure>
<ol>
<li>The client queries the DNS for domain name resolution</li>
<li>The CDN is queried to check if the requested ticket is in the CDN cache</li>
<li>The client creates an HTTP connection to the server</li>
<li>The server delegates the client&rsquo;s request to view the ticket inventory</li>
<li>The inventory service queries the trending cache to check if the requested ticket is on the cache</li>
<li>The inventory service queries the read replicas of the inventory datastore on a cache miss</li>
<li>The inventory service queries the object store to fetch the relevant media files of the ticket</li>
<li>The server delegates the client&rsquo;s request to search for a ticket</li>
<li>The search service queries the inverted index store to fetch the relevant tickets</li>
<li>The search service queries the object store to fetch the relevant media files</li>
<li>The server delegates the client&rsquo;s request to purchase a ticket</li>
<li>The distributed lock defined with a short TTL is acquired to prevent concurrent users from purchasing the same unique ticket</li>
<li>The purchase service stores the session data in a linked hashmap with a reasonable TTL on the session cache</li>
<li>The purchase service stores the purchase information on the cart database and updates the inventory data store</li>
<li>The purchase service invokes the payment service to process the financial transaction</li>
<li>The server persists the logs on the message queue for asynchronous processing</li>
<li>The log service fetches the logs on the message queue for further processing</li>
<li>The log service aggregates the logs and stores the logs on the document store</li>
<li>The operations (13–15) to purchase a ticket are executed as a two-phase commit to support rollback on failure</li>
<li>Materialized conflict (alternative to distributed lock) is implemented by creating database rows for each ticket at the expense of storage costs and by acquiring a lock on database rows</li>
<li>The operation of putting a ticket into the shopping cart or navigating to the payment page should temporarily reserve the tickets for a reasonable time frame</li>
<li>Autoscaling of services and serverless components can be used to save costs by lowering operational complexity</li>
<li>The <a href="https://web.archive.org/web/20240108015800/https://www.pgbouncer.org/" target="_blank" rel="noopener noreffer ">pgbouncer</a> can be used for connection pooling to Postgres</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-11">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="chat-service">Chat Service</h3>
<p>You can read the detailed article on <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/slack-architecture/" target="_blank" rel="noopener noreffer ">Slack Architecture</a>. The popular implementations of the chat service are the following:</p>
<ul>
<li><a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/whatsapp-engineering" target="_blank" rel="noopener noreffer ">Whatsapp</a></li>
<li>Facebook Messenger</li>
<li><a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/messaging-architecture" target="_blank" rel="noopener noreffer ">Slack</a></li>
<li>Discord</li>
<li>Telegram</li>
<li><a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/chat-application-architecture" target="_blank" rel="noopener noreffer ">WeChat</a></li>
<li><a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/zoom-architecture" target="_blank" rel="noopener noreffer ">Zoom</a></li>
</ul>
<hr>
<h4 id="requirements-10">Requirements</h4>
<ul>
<li>The user (<strong>sender</strong>) can start a one-to-one chat conversation with another user (<strong>receiver</strong>)</li>
<li>The sender can see an acknowledgment signal for receive and read</li>
<li>The user can see the online status (<strong>presence</strong>) of other users</li>
<li>The user can start a group chat with other users</li>
<li>The user can share media (images) files with other users</li>
</ul>
<hr>
<h4 id="data-storage-10">Data storage</h4>
<h5 id="database-schema-10">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/chat-service/chat-service-database-schema.webp" title="Chat service; Database schema" data-thumbnail="/system-design-interview-cheatsheet/chat-service/chat-service-database-schema.webp" data-sub-html="<h2>Chat service; Database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/chat-service/chat-service-database-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/chat-service/chat-service-database-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/chat-service/chat-service-database-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/chat-service/chat-service-database-schema.webp 2x" data-sizes="auto" alt="Chat service; Database schema" width="1056" height="421"/>
    </a><figcaption class="image-caption">Chat service; Database schema</figcaption>
    </figure>
<ul>
<li>The primary entities are the groups, the presence, the users, the friends, and the messages tables</li>
<li>The relationship between the groups and users tables is many-to-many</li>
<li>The relationship between the users and friends table is many-to-many</li>
<li>The relationship between the users and the messages table is 1-to-many</li>
<li>The relationship between the users and the presence table is 1-to-1</li>
<li>The friends table is the join table to show the relationship between users</li>
</ul>
<h5 id="type-of-data-store-10">Type of data store</h5>
<ul>
<li>SQL database such as Postgres persists the metadata (groups, avatar, friends, WebSocket URL) for ACID compliance</li>
<li>NoSQL data store (<a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Log-structured_merge-tree" target="_blank" rel="noopener noreffer ">LSM</a> tree-based) such as Cassandra is used to store the chat messages</li>
<li>An object store such as AWS S3 is used to store media files (images) included in the chat conversation</li>
<li>A cache server such as Redis is used to store the transient data (presence status and group chat messages) to improve latency</li>
<li>The publish-subscribe server is implemented using a message queue such as Apache Kafka</li>
<li>The message queue stores the messages for asynchronous processing (generation of chat conversation search index)</li>
<li>Lucene-based inverted index data store such as Apache Solr is used to store chat conversation search index to provide search functionality</li>
</ul>
<hr>
<h4 id="high-level-design-10">High-level design</h4>
<ul>
<li>The user creates an HTTP connection for authentication and fetching of the relevant metadata</li>
<li>The WebSocket connection is used for real-time bidirectional chat conversations between the users</li>
<li>The set data type by Redis provides constant time complexity for tracking the online presence of the users</li>
<li>The object store persists the media files shared by the user on the chat conversation</li>
</ul>
<hr>
<h4 id="workflow-3">Workflow</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/chat-service/chat-service-architecture.webp" title="Chat service; Architecture" data-thumbnail="/system-design-interview-cheatsheet/chat-service/chat-service-architecture.webp" data-sub-html="<h2>Chat service; Architecture</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/chat-service/chat-service-architecture.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/chat-service/chat-service-architecture.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/chat-service/chat-service-architecture.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/chat-service/chat-service-architecture.webp 2x" data-sizes="auto" alt="Chat service; Architecture" width="2008" height="706"/>
    </a><figcaption class="image-caption">Chat service; Architecture</figcaption>
    </figure>
<ol>
<li>The client creates an HTTP connection to the load balancer</li>
<li>The load balancer delegates the HTTP request of the client to a server with free capacity</li>
<li>The server queries the authentication service for the authentication of the client</li>
<li>The server queries the SQL database to fetch the metadata such as the user groups, avatar, friends, WebSocket URL</li>
<li>The server queries the group cache to fetch the group chat messages</li>
<li>The server updates the message queue with asynchronous tasks such as the generation of the chat search index</li>
<li>The client creates a WebSocket connection to the gateway server for real-time bidirectional chat conversations</li>
<li><a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">Consistent hashing</a> (key = user_id) is used to delegate the WebSocket connection to the relevant chat server</li>
<li>The chat server delegates the WebSocket connection to the pub-sub server to identify the chat server of the receiver</li>
<li>The pub-sub server persists the chat messages on the chat data store for durability</li>
<li>The pub-sub server queries the presence service to update the presence status of the user</li>
<li>The presence service stores the presence status of the user on the presence cache</li>
<li>The pub-sub server delegates the WebSocket connection to the chat server of the receiver</li>
<li>The chat server relays the WebSocket connection through the CDN for group chat conversations</li>
<li>The CDN delegates the (group) chat message to the receiver</li>
<li>The pub-sub server invokes the push notification service to notify the offline clients</li>
<li>The server stores the chat media files on the object store and the URL of the media file is shared with the receiver</li>
<li>The admin service (not shown in the figure to reduce clutter) updates the pub-sub server with the latest routing information by querying the server</li>
<li>The mapping between the user_id and WebSocket connection ID (used to identify the user WebSocket for delegation) is stored in the memory of the chat server</li>
<li>The write-behind pattern is used to persist the presence cache on a key-value store</li>
<li>The cache-aside pattern is used to update the group cache</li>
<li>The presence cache is updated when the user connects to the chat server</li>
<li><a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">Consistent hashing</a> (key = user_id) is used to partition the presence cache</li>
<li>The offline client stores the chat message on the local storage until a WebSocket connection is established</li>
<li>The background process on the receiver can retrieve messages for an improved user experience</li>
<li>The clients must fetch the chat messages using pagination for improved performance</li>
<li>The pub-sub server stores the chat message on the data store and forwards the chat message when the receiver is back online</li>
<li>If the requirements are to keep the messages ephemeral on the server, a dedicated clean-up service is run against the replica chat data store to remove the delivered chat messages</li>
<li>If the requirements are to keep the messages permanently on the server, the chat data store acts as the source of truth</li>
<li>The one-to-one chat messages can be cached on the client for improved performance on future reads</li>
<li>The replication factor of the chat data store must be set to at least a value of three to improve the durability</li>
<li>The records in the presence cache are set with an expiry TTL of a reasonable time frame (5 minutes)</li>
<li>The sliding window algorithm can be used to remove the expired records on the presence cache</li>
<li>The last seen timestamp of the user is updated on the expiry of the records on the presence cache</li>
<li>The stateful services are partitioned by the partition keys user_id or group_id and are replicated across data centers for high availability</li>
<li>The hot shards can be handled by alerting, automatic re-partitioning of the shards, and the usage of high-end hardware</li>
<li>The Apache Solr can be used to provide search functionality</li>
<li>The publish-subscribe pattern is used to invoke job workers that run the search index asynchronously</li>
<li>The SQL database can be configured in single-master with semi-sync replication for high availability</li>
<li>The receive/read acknowledgment is updated through the WebSocket communication</li>
<li>The chat messages are end-to-end encrypted using a symmetric encryption key</li>
<li>The client creates a new HTTP connection on the crash of the server or the client</li>
<li>The gateway server performs SSL termination of the client connection</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-12">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="proximity-service">Proximity Service</h3>
<p>The popular implementations of the proximity service are the following:</p>
<ul>
<li>Tripadvisor</li>
<li>Yelp</li>
<li>Foursquare</li>
<li>Google Maps</li>
<li><a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/uber-eta" target="_blank" rel="noopener noreffer ">Uber ETA</a></li>
</ul>
<hr>
<h4 id="requirements-11">Requirements</h4>
<ul>
<li>The client (<strong>creator</strong>) can add attractions (restaurants, markets)</li>
<li>The client (<strong>user</strong>) can <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/how-does-uber-find-nearby-drivers" target="_blank" rel="noopener noreffer ">find all the nearby</a> attractions within a given radius</li>
<li>The users can view the relevant data and reviews of an attraction</li>
</ul>
<hr>
<h4 id="data-storage-11">Data storage</h4>
<h5 id="database-schema-11">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-database-schema.webp" title="Proximity service; Database schema" data-thumbnail="/system-design-interview-cheatsheet/proximity-service/proximity-service-database-schema.webp" data-sub-html="<h2>Proximity service; Database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/proximity-service/proximity-service-database-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-database-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-database-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-database-schema.webp 2x" data-sizes="auto" alt="Proximity service; Database schema" width="1142" height="349"/>
    </a><figcaption class="image-caption">Proximity service; Database schema</figcaption>
    </figure>
<ul>
<li>The primary entities are the users, the media, the reviews, the locations, and the attractions tables</li>
<li>The relationship between the users and the media table is 1-to-many</li>
<li>The relationship between the users (creator) and attractions table is 1-to-many</li>
<li>The relationship between the users and the reviews table is 1-to-many</li>
<li>The relationship between the attractions and the reviews table is 1-to-many</li>
<li>The relationship between the locations and the attractions table is 1-to-1</li>
</ul>
<h5 id="type-of-data-store-11">Type of data store</h5>
<ul>
<li>SQL database such as Postgres persists the location data (latitude, longitude)</li>
<li>The <a href="https://web.archive.org/web/20240108015800/https://postgis.net/" target="_blank" rel="noopener noreffer ">PostGIS</a> extension of Postgres is used to generate the <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Spatial_database" target="_blank" rel="noopener noreffer ">spatial index</a> using <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Geohash" target="_blank" rel="noopener noreffer ">Geohash</a> or <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/R-tree" target="_blank" rel="noopener noreffer ">R-tree</a></li>
<li>NoSQL data store such as MongoDB is used to store the metadata of an attraction</li>
<li>An object store such as AWS S3 is used to store media files (images) of an attraction</li>
<li>A cache server such as Redis is used to store the popular Geohashes and the locations</li>
<li>A message queue such as Apache Kafka is used to orchestrate the asynchronous processing of the media files</li>
<li>The Lucene-based inverted index data store such as Elasticsearch is used to store the search index to provide search functionality</li>
<li>The <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Trie" target="_blank" rel="noopener noreffer ">Trie</a> server is used to provide autocompletion functionality</li>
</ul>
<hr>
<h4 id="high-level-design-11">High-level design</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-multi-datacenter.webp" title="Proximity service; Multi data center replication" data-thumbnail="/system-design-interview-cheatsheet/proximity-service/proximity-service-multi-datacenter.webp" data-sub-html="<h2>Proximity service; Multi data center replication</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/proximity-service/proximity-service-multi-datacenter.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-multi-datacenter.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-multi-datacenter.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-multi-datacenter.webp 2x" data-sizes="auto" alt="Proximity service; Multi data center replication" width="1132" height="441"/>
    </a><figcaption class="image-caption">Proximity service; Multi data center replication</figcaption>
    </figure>
<ul>
<li>The client (<strong>creator</strong>) updates the data stores (attraction and location) with the relevant metadata of an attraction by writing to the primary data center</li>
<li>The DNS redirects the read requests from the client (<strong>user</strong>) to the secondary data centers to handle the read-heavy traffic</li>
<li>The spatial index (Geohash) is used to identify the IDs of nearby attractions within a given radius</li>
</ul>
<hr>
<h4 id="write-path-7">Write Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-write-path.webp" title="Proximity service; Write Path" data-thumbnail="/system-design-interview-cheatsheet/proximity-service/proximity-service-write-path.webp" data-sub-html="<h2>Proximity service; Write Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/proximity-service/proximity-service-write-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-write-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-write-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-write-path.webp 2x" data-sizes="auto" alt="Proximity service; Write Path" width="1250" height="753"/>
    </a><figcaption class="image-caption">Proximity service; Write Path</figcaption>
    </figure>
<ol>
<li>The client (<strong>creator</strong>) creates an HTTP connection to the load balancer</li>
<li>The write requests are rate limited for high availability</li>
<li>The load balancer delegates the client HTTP request to a server in the nearby primary data center</li>
<li>The latitude and longitude data of an attraction are added to the location database</li>
<li>The metadata (description) of an attraction is added to the attraction data store</li>
<li>The raw media files (images) are persisted on the object store</li>
<li>The message queue is used for the asynchronous processing of the raw media files</li>
<li>The index service fetches the Geohash and the ID of an attraction by querying the location database</li>
<li>The index service fetches the metadata of an attraction by querying the attraction data store</li>
<li>The index service stores the transformed metadata of an attraction on the inverted index store to provide the search functionality</li>
<li>The index service updates the trie server to provide autocompletion functionality</li>
<li>The spatial index is generated on the location database using Geohash</li>
<li>The Geohash (string value) is calculated by encoding the latitude and longitude values</li>
<li>Alternatively, the <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Quadtree" target="_blank" rel="noopener noreffer ">Quadtree</a> data structure can be used to store the list of nearby attractions at the expense of an increased operational complexity</li>
<li>The standard relational database as the location database will perform poorly due to float values in database queries</li>
<li>The Geohash is performant because single index queries are faster and Geohash provides quicker proximity search</li>
<li>The stateful services are partitioned by geographical data for high availability</li>
<li>The compressed system logs are stored on the object store to save costs</li>
<li>The financially sensitive data must have a higher replication factor for durability</li>
</ol>
<hr>
<h4 id="read-path-7">Read Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-read-path.webp" title="Proximity service; Read Path" data-thumbnail="/system-design-interview-cheatsheet/proximity-service/proximity-service-read-path.webp" data-sub-html="<h2>Proximity service; Read Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/proximity-service/proximity-service-read-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-read-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-read-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/proximity-service/proximity-service-read-path.webp 2x" data-sizes="auto" alt="Proximity service; Read Path" width="1531" height="803"/>
    </a><figcaption class="image-caption">Proximity service; Read Path</figcaption>
    </figure>
<ol>
<li>The client (<strong>user</strong>) queries the DNS for domain name resolution</li>
<li>The <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/cdn-explained" target="_blank" rel="noopener noreffer ">CDN</a> is queried to check if the requested attraction is in the CDN cache</li>
<li>The client creates an HTTP connection to the load balancer</li>
<li>The read requests are rate limited to prevent malicious users</li>
<li>The load balancer delegates the client request to the server in the nearby secondary data center</li>
<li>The server queries the autocompletion service to provide relevant keyword suggestions</li>
<li>The server forwards the search query of the client to the search service</li>
<li>The search service queries the inverted index data store to find the relevant data records</li>
<li>The server delegates the client&rsquo;s request to find nearby attractions to the nearby service</li>
<li>The nearby service calculates the Geohash of the request and queries the Geohash cache to fetch the list of nearby attraction IDs</li>
<li>The location database (replica) is queried on a cache miss</li>
<li>The nearby service queries the attraction cache to fetch the metadata of an attraction</li>
<li>The attraction data store (replica) is queried on a cache miss</li>
<li>The relevant media files are fetched by querying the object store</li>
<li>The server queries the review service to fetch the relevant comments and ratings of an attraction</li>
<li>The review service queries the comment data store (replica) to fetch the comments</li>
<li>The client can cache the response with a TTL to improve the latency on further requests</li>
<li>LRU policy is used to evict the cache</li>
<li>The cache aside pattern is used to update the cache</li>
<li>Pagination should be used to fetch the response to improve the latency</li>
<li>The locations table is denormalized (create multi-character Geohash) for improved read performance</li>
<li>[<a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/what-is-service-discovery/" target="_blank" rel="noopener noreffer ">service discovery</a>](<a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/what-is-service-discovery/">https://systemdesign.one/what-is-service-discovery/</a>) is implemented for the dynamic deployment of services</li>
<li>The <a href="https://web.archive.org/web/20240108015800/https://postgis.net/workshops/postgis-intro/knn.html" target="_blank" rel="noopener noreffer ">KNN</a> (K Nearest Neighbours) on PostGIS is used to fetch the list of nearby attractions in near <a href="https://web.archive.org/web/20240108015800/https://gis.stackexchange.com/questions/78974/what-is-the-complexity-of-neigborhood-search-in-postgis" target="_blank" rel="noopener noreffer ">logarithmic time complexity</a></li>
<li>The Euclidean formula can be used to distance between any attractions</li>
<li>The Geohash values with the same prefix are close to each other but not vice-versa</li>
<li>The attractions on neighboring Geohash grids are considered to resolve the boundary problem</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-13">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="ride-hailing-service">Ride-Hailing Service</h3>
<p>The popular implementations of the ride-hailing service are the following:</p>
<ul>
<li>Uber</li>
<li>Lyft</li>
<li>Curb</li>
<li>Grab</li>
</ul>
<hr>
<h4 id="requirements-12">Requirements</h4>
<ul>
<li>The rider can see all the available nearby drivers</li>
<li>The driver can accept a trip requested by the rider</li>
<li>The current location of the rider and driver should be continuously published on the trip confirmation</li>
</ul>
<hr>
<h4 id="data-storage-12">Data storage</h4>
<h5 id="database-schema-12">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-database-schema.webp" title="Ride-hailing service; Database schema" data-thumbnail="/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-database-schema.webp" data-sub-html="<h2>Ride-hailing service; Database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-database-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-database-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-database-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-database-schema.webp 2x" data-sizes="auto" alt="Ride-hailing service; Database schema" width="844" height="273"/>
    </a><figcaption class="image-caption">Ride-hailing service; Database schema</figcaption>
    </figure>
<ul>
<li>The primary entities are the riders, the drivers, the vehicles, and the trips tables</li>
<li>The relationship between the drivers and the vehicles table is 1-to-many</li>
<li>The relationship between the drivers and trips table is 1-to-many</li>
<li>The relationship between the riders and trips table is 1-to-many</li>
<li>The trips table is a join table to represent the relationship between the riders and the drivers</li>
</ul>
<hr>
<h5 id="type-of-data-store-12">Type of data store</h5>
<ul>
<li>The wide-column data store (<a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Log-structured_merge-tree" target="_blank" rel="noopener noreffer ">LSM</a> tree-based) such as Apache Cassandra is used to persist the time-series location data of the client (driver and rider)</li>
<li>The cache server such as Redis is used to store the current location of the driver and the rider for quick lookups</li>
<li>Message queue such as Apache Kafka is used to handle the heavy traffic</li>
<li>A relational database such as Postgres stores the metadata of the users</li>
</ul>
<hr>
<h4 id="high-level-design-12">High-level design</h4>
<ul>
<li>The DNS redirects the requests from the client (rider and driver) to nearby data centers</li>
<li>The client (rider and driver) updates the data stores with Geohash of their real-time location</li>
<li><a href="https://web.archive.org/web/20240108015800/https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API" target="_blank" rel="noopener noreffer ">WebSocket</a> is used for real-time bidirectional communication between the rider and the driver</li>
<li><a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">Consistent hashing</a> is used to partition the data stores geographically</li>
</ul>
<hr>
<h4 id="write-path-8">Write Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-write-path.webp" title="Ride-hailing service; Write Path" data-thumbnail="/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-write-path.webp" data-sub-html="<h2>Ride-hailing service; Write Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-write-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-write-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-write-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-write-path.webp 2x" data-sizes="auto" alt="Ride-hailing service; Write Path" width="1478" height="1078"/>
    </a><figcaption class="image-caption">Ride-hailing service; Write Path</figcaption>
    </figure>
<ol>
<li>The client (driver) creates a WebSocket connection on the load balancer to publish the current location (latitude, longitude) of the driver in real-time</li>
<li>The load balancer uses the round-robin algorithm to delegate the client&rsquo;s connection to a server with free capacity in the nearby data center</li>
<li>The Geohash of the driver location is persisted on the message queue to handle the heavy traffic</li>
<li>The Geohash of the driver location is stored on the wide-column data store for durability</li>
<li>The Geohash is stored on the point location cache to provide real-time location updates</li>
<li>The client (rider) creates a WebSocket connection on the load balancer to publish the current location (latitude, longitude) of the rider in real-time</li>
<li>The load balancer uses the round-robin algorithm to delegate the client&rsquo;s connection to a server with free capacity in the nearby data center</li>
<li>The Geohash of the rider location is persisted on the message queue to handle the heavy traffic</li>
<li>The analytics service (MapReduce based) queries the wide-column data store to generate offline analytics on the trip data</li>
<li>The controller service prevents hot spots by auto-repartitioning the stateful services</li>
<li>The point location cache is denormalized by the generation of multi-character Geohash to improve the read performance (provides zoom functionality)</li>
<li>The server holding the rider&rsquo;s WebSocket connection queries the point location cache to identify the available nearby drivers</li>
<li>As a naive approach, the <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Euclidean_distance" target="_blank" rel="noopener noreffer ">euclidean distance</a> can be used to find the nearest vehicles within a Geohash</li>
<li>Sharding of the services can be implemented on multiple levels such as the city level, geo sharding for further granularity, and the product level (capacity of the vehicle)</li>
<li>The hot spots are handled through replication and further partitioning of the stateful services by the driver ID</li>
<li>The wide-column data store is optimized for writes while the cache server is optimized for reads</li>
<li>The wide-column data store is replicated across multiple data centers for durability</li>
<li>The LRU policy is used to evict the cache server</li>
</ol>
<hr>
<h4 id="read-path-8">Read Path</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-read-path.webp" title="Ride-hailing service; Driver accepting a trip request" data-thumbnail="/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-read-path.webp" data-sub-html="<h2>Ride-hailing service; Driver accepting a trip request</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-read-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-read-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-read-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/ride-hailing-service/ride-hailing-service-read-path.webp 2x" data-sizes="auto" alt="Ride-hailing service; Driver accepting a trip request" width="1453" height="870"/>
    </a><figcaption class="image-caption">Ride-hailing service; Driver accepting a trip request</figcaption>
    </figure>
<ol>
<li>The client (driver) creates a WebSocket connection on the load balancer to receive updates on trip requests in real-time</li>
<li>The load balancer uses the round-robin algorithm to delegate the client&rsquo;s connection to a server with free capacity in the nearby data center</li>
<li>The server holding the driver&rsquo;s WebSocket connection must acquire a distributed lock to handle concurrency issues when accepting trip requests from <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/shopify-flash-sale" target="_blank" rel="noopener noreffer ">concurrent</a> unique riders</li>
<li>The server holding the driver&rsquo;s WebSocket connection invokes the trip service to confirm the trip</li>
<li>The trip service queries the pub-sub server to create a one-to-one communication channel between the driver and the rider</li>
<li>The server publishes the location updates by the driver on the pub-sub server</li>
<li>The pub-sub server persists the driver&rsquo;s location data on the trip data store for durability</li>
<li>The pub-sub server delegates the location updates by the driver to the server that is holding the rider&rsquo;s WebSocket connection using the publish-subscribe pattern</li>
<li>The server delegates the driver&rsquo;s location update to the load balancer that holds the rider&rsquo;s WebSocket connection</li>
<li>The driver&rsquo;s location updates are published to the rider</li>
<li>The state of the trip is cached on the client (rider and driver) for a fallback to another data center</li>
<li>Chaos Engineering can be used for resiliency testing</li>
<li>Services <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/gossip-protocol/" target="_blank" rel="noopener noreffer ">gossip protocol</a> the state for high availability</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-14">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="google-maps">Google Maps</h3>
<p>The popular implementations of the navigation service are the following:</p>
<ul>
<li>Google Maps</li>
<li>OpenStreetMap</li>
<li>Bing Maps</li>
</ul>
<hr>
<h4 id="requirements-13">Requirements</h4>
<ul>
<li>The user (<strong>client</strong>) can find the nearby points of interest within a given radius</li>
<li>The client can find the real-time estimated time of arrival (<strong>ETA</strong>) between two locations</li>
<li>The client receive suggestions on the possible routes between the two locations</li>
</ul>
<hr>
<h4 id="data-storage-13">Data storage</h4>
<h5 id="database-schema-13">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-database-schema.webp" title="Google Maps; Database schema" data-thumbnail="/system-design-interview-cheatsheet/google-maps/google-maps-database-schema.webp" data-sub-html="<h2>Google Maps; Database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/google-maps/google-maps-database-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-database-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-database-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-database-schema.webp 2x" data-sizes="auto" alt="Google Maps; Database schema" width="1052" height="359"/>
    </a><figcaption class="image-caption">Google Maps; Database schema</figcaption>
    </figure>
<ul>
<li>The primary entities are the locations, the places, and the media tables</li>
<li>The relationship between the locations and the places table is 1-to-many</li>
<li>The relationship between the places and the media table is 1-to-many</li>
<li>The <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Spatial_database" target="_blank" rel="noopener noreffer ">spatial index</a> using <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Geohash" target="_blank" rel="noopener noreffer ">Geohash</a> or <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/R-tree" target="_blank" rel="noopener noreffer ">R-tree</a> is created on the locations table</li>
</ul>
<hr>
<h5 id="type-of-data-store-13">Type of data store</h5>
<ul>
<li>SQL database such as Postgres persists the location data (latitude, longitude) and the <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Vector_tiles" target="_blank" rel="noopener noreffer ">vector tiles</a></li>
<li>The <a href="https://web.archive.org/web/20240108015800/https://postgis.net/" target="_blank" rel="noopener noreffer ">PostGIS</a> extension of Postgres is used to generate the spatial index</li>
<li>The wide-column data store (<a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Log-structured_merge-tree" target="_blank" rel="noopener noreffer ">LSM</a> tree-based) such as Apache Cassandra is used to persist the trip data for high write throughput</li>
<li>A cache server such as Redis is used to store the popular routes and the road segments</li>
<li>A message queue such as Apache Kafka is used to handle heavy traffic</li>
<li>The message queue is also configured as the pub-sub server</li>
<li>NoSQL document store such as MongoDB is used to store the metadata of the road segments</li>
<li>The media files and raster tiles are stored in a managed object storage such as AWS S3</li>
<li>The CDN caches the popular tiles and the media files</li>
<li>Lucene-based inverted-index data store such as Apache Solr is used to store the index data of locations</li>
</ul>
<hr>
<h4 id="high-level-design-13">High-level design</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/navigation-service.webp" title="Navigation service" data-thumbnail="/system-design-interview-cheatsheet/google-maps/navigation-service.webp" data-sub-html="<h2>Navigation service</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/google-maps/navigation-service.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/navigation-service.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/navigation-service.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/navigation-service.webp 2x" data-sizes="auto" alt="Navigation service" width="1673" height="910"/>
    </a><figcaption class="image-caption">Navigation service</figcaption>
    </figure>
<ul>
<li>Calculation of ETA is the shortest path in a directed weighted graph problem</li>
<li>The graph is partitioned and the routes are precomputed for scalability</li>
</ul>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-map-matching.webp" title="Google Maps; Map matching" data-thumbnail="/system-design-interview-cheatsheet/google-maps/google-maps-map-matching.webp" data-sub-html="<h2>Google Maps; Map matching</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/google-maps/google-maps-map-matching.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-map-matching.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-map-matching.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-map-matching.webp 2x" data-sizes="auto" alt="Google Maps; Map matching" width="786" height="170"/>
    </a><figcaption class="image-caption">Google Maps; Map matching</figcaption>
    </figure>
<ul>
<li>The map matching is performed to improve the accuracy of ETA</li>
<li>The <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Kalman_filter" target="_blank" rel="noopener noreffer ">Kalman filter</a> is used for map matching</li>
<li>The cache and data stores are replicated and sharded geographically through <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">consistent hashing</a> to handle hot spots</li>
<li>Monitoring and fallback can be configured for high availability</li>
</ul>
<hr>
<h4 id="points-ofinterest">Points of Interest</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-points-of-interest.webp" title="Google Maps; Points of interest" data-thumbnail="/system-design-interview-cheatsheet/google-maps/google-maps-points-of-interest.webp" data-sub-html="<h2>Google Maps; Points of interest</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/google-maps/google-maps-points-of-interest.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-points-of-interest.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-points-of-interest.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-points-of-interest.webp 2x" data-sizes="auto" alt="Google Maps; Points of interest" width="1123" height="959"/>
    </a><figcaption class="image-caption">Google Maps; Points of interest</figcaption>
    </figure>
<ol>
<li>The client executes a DNS query to resolve the domain name</li>
<li>The client queries the CDN to check if the nearby points of interest are cached on the CDN</li>
<li>The client creates a <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/WebSocket" target="_blank" rel="noopener noreffer ">WebSocket</a> connection on the load balancer for real-time updates</li>
<li>The load balancer delegates the client&rsquo;s connection to a server with free capacity</li>
<li>The server queries the trie server to provide autocompletion functionality</li>
<li>The server delegates the search query of the client to the search service</li>
<li>The search service queries the inverted index data store to find the relevant locations</li>
<li>The server delegates the points of interest query from the client to the location service</li>
<li>The location service calculates the Geohash from the request and queries the location cache to fetch the list of nearby points of interest IDs</li>
<li>The location database (replica) is queried on a cache miss</li>
<li>The location service queries the places cache to fetch the metadata of a place</li>
<li>The places data store (replica) is queried on a cache miss</li>
<li>The location service queries the object store to fetch the relevant media files and the raster tiles</li>
<li>The tile server on the location service provides SQL functionality on vector tiles</li>
<li>LRU policy is used to evict the cache</li>
<li>GPS signals are not accurate for the identification of the static location due to the multipath effect (reflection from a building)</li>
<li>The WiFi access point is used in addition to GPS signals to find the static location of a client accurately</li>
<li>The map is displayed on a web browser by placing multiple smaller vector tiles and raster tiles next to each other to make up a single bigger picture</li>
<li>The raster tiles (png, jpg) are useful for off-road trajectories to speed up the loading of detected map errors</li>
<li>Vector tiles allow the reduction of bandwidth by restricting data transfer to the current viewport and zoom level</li>
<li>Vector tiles allow to apply styling on the fly on the client and thereby reduce the server load</li>
<li>Vector tiles transfer the vector information (path and polygon) instead of transferring the image tiles</li>
<li>Vector information is grouped into tiles for caching and partitioning</li>
<li>The tiles can be pre-generated and cached to improve latency</li>
<li>Each zoom level shows a unique set of tiles with a different granularity of information</li>
<li>The number of tiles doubles when the user zooms out</li>
<li>Geohash is used to identify the tile on the map</li>
<li>The viewport of the client encloses the container that assigns absolute positions to the tiles</li>
<li>The container is moved when the user pans the map</li>
<li>Street view and satellite imagery are used to identify places in the world</li>
</ol>
<hr>
<h4 id="estimated-time-ofarrival">Estimated Time of Arrival</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-estimated-time-of-arrival.webp" title="Google Maps; Estimated Time of Arrival" data-thumbnail="/system-design-interview-cheatsheet/google-maps/google-maps-estimated-time-of-arrival.webp" data-sub-html="<h2>Google Maps; Estimated Time of Arrival</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/google-maps/google-maps-estimated-time-of-arrival.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-estimated-time-of-arrival.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-estimated-time-of-arrival.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/google-maps/google-maps-estimated-time-of-arrival.webp 2x" data-sizes="auto" alt="Google Maps; Estimated Time of Arrival" width="1336" height="864"/>
    </a><figcaption class="image-caption">Google Maps; Estimated Time of Arrival</figcaption>
    </figure>
<ol>
<li>The client executes a DNS query to resolve the domain name</li>
<li>The client queries the CDN to check if the requested route is cached on the CDN</li>
<li>The client creates a WebSocket connection on the load balancer for real-time bi-directional communication on ETA, trip, and traffic data</li>
<li>The load balancer delegates the client&rsquo;s request to a server with free capacity</li>
<li>The server queries the route cache to fetch the list of possible routes to the destination</li>
<li>The route database (replica) is queried on a cache miss</li>
<li>The server queries the road segment cache to fetch the metadata of the road segments on the suggested route</li>
<li>The road segment data store (replica) is queried on a cache miss</li>
<li>The server queries the trip data store to recalculate the real-time ETA</li>
<li>The server queries the map-matching service to calculate the ETA accurately</li>
<li>The map-matching service queries the trip data store to fetch the list of recent GPS signals</li>
<li>The map matching service queries the road segment data store to identify the nearest road segments</li>
<li>The weather service publishes the latest weather data on the pub-sub server</li>
<li>The traffic service (<a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/HyperLogLog" target="_blank" rel="noopener noreffer ">HyperLogLog</a> based) publishes the latest traffic data on the pub-sub server</li>
<li>The server fetches the latest weather and traffic data using the publish-subscribe pattern</li>
<li>The server queries the route ranking service to filter and sort the result</li>
<li>The server publishes the GPS signals on the message queue for asynchronous processing</li>
<li>Apache Spark executes jobs on the trip data to detect changes in roads, hot spots, and traffic patterns</li>
<li>Apache Spark job asynchronously updates the route database with any detected changes</li>
<li>The physical map is represented as a graph with road segments as the directed edges and road intersections as the nodes</li>
<li>The route between the origin and destination on the road network should be calculated in the least cost (function of time and distance)</li>
<li>Map matching is the problem of matching the raw GPS signals to the relevant road segments</li>
<li>The embedded sensors on the smartphones are used to geo-localize the users</li>
<li>The graph can be partitioned to pre-compute the possible routes within the partitions with a time complexity of sqrt(n), where n = number of road intersections</li>
<li>The partitions can be created on different granularities (country, city) to improve the latency of long-distance queries</li>
<li>The interactions are applied on the boundaries of the partitions to improve the accuracy and <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/micro-frontends" target="_blank" rel="noopener noreffer ">scalability</a></li>
<li><a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm" target="_blank" rel="noopener noreffer ">Dijkstra&rsquo;s</a> algorithm (sub-optimal due to scalability) provides a time complexity of O(nlogn) for route calculation, where n = number of road intersections</li>
<li>The shortest path algorithm on the weighted graph such as the <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm" target="_blank" rel="noopener noreffer ">Bellman-Ford</a> provides a time complexity of O(ve) for route calculation, where v = number of vertices and e = number of edges</li>
<li>The edge weight of the graph is populated with weather and traffic data</li>
<li>The popular partitions and routes can be cached to improve the latency</li>
<li>Alternate routes can be suggested if applying the weather and traffic data on the shortest distanced route returns a delayed ETA</li>
<li>The time series data (seasonality), map data, routing, and machine learning can be used to predict the ETA</li>
<li><a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Viterbi_algorithm" target="_blank" rel="noopener noreffer ">Viterbi algorithm</a> (dynamic programming) can be used to identify the most probable sequence of road segments using a sequence of GPS signals</li>
<li>Alternatively, the <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm" target="_blank" rel="noopener noreffer ">KNN algorithm</a> with a minimum radius (k = 2) can be executed on the Geohash to identify the closest road segments</li>
<li>The marginalized particle filter running on an unscented Kalman filter is used for real-time map matching</li>
<li>Kalman filter is an optimal algorithm that uses multiple GPS signals to estimate the accurate road segment of the client</li>
<li>Kalman filter is also applied to the seasonality of the time series data</li>
<li>Additional data types such as traffic and weather can be added to marginalized particle filter</li>
<li>Machine learning on the time series historical data helps to predict traffic conditions</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-15">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="youtube">YouTube</h3>
<p>The popular implementations of an on-demand video streaming service are the following:</p>
<ul>
<li><a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/youtube-scalability" target="_blank" rel="noopener noreffer ">YouTube</a></li>
<li><a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/netflix-microservices" target="_blank" rel="noopener noreffer ">Netflix</a></li>
<li>Vimeo</li>
<li>TikTok</li>
</ul>
<hr>
<h4 id="requirements-14">Requirements</h4>
<ul>
<li>The user (<strong>client</strong>) can upload video files</li>
<li>The user can stream video content</li>
<li>The user can search for videos based on the video title</li>
</ul>
<hr>
<h4 id="data-storage-14">Data storage</h4>
<h5 id="database-schema-14">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/youtube/youtube-database-schema.webp" title="YouTube; Database schema" data-thumbnail="/system-design-interview-cheatsheet/youtube/youtube-database-schema.webp" data-sub-html="<h2>YouTube; Database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/youtube/youtube-database-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/youtube/youtube-database-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/youtube/youtube-database-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/youtube/youtube-database-schema.webp 2x" data-sizes="auto" alt="YouTube; Database schema" width="793" height="294"/>
    </a><figcaption class="image-caption">YouTube; Database schema</figcaption>
    </figure>
<ul>
<li>The primary entities are the videos, the users, and the comments tables</li>
<li>The relationship between the users and the videos is 1-to-many</li>
<li>The relationship between the users and the comments table is 1-to-many</li>
<li>The relationship between the videos and the comments table is 1-to-many</li>
</ul>
<hr>
<h5 id="type-of-data-store-14">Type of data store</h5>
<ul>
<li>The wide-column data store (<a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Log-structured_merge-tree" target="_blank" rel="noopener noreffer ">LSM</a> tree-based) such as <a href="https://web.archive.org/web/20240108015800/https://hbase.apache.org/" target="_blank" rel="noopener noreffer ">Apache HBase</a> is used to persist thumbnail images for clumping the files together, fault-tolerance, and replication</li>
<li>A cache server such as Redis is used to store the metadata of popular video content</li>
<li>Message queue such as Apache Kafka is used for the asynchronous processing (encoding) of videos</li>
<li>A relational database such as MySQL stores the metadata of the users and the videos</li>
<li>The video files are stored in a managed object storage such as AWS S3</li>
<li>Lucene-based inverted-index data store such as Apache Solr is used to persist the video index data to provide search functionality</li>
</ul>
<hr>
<h4 id="high-level-design-14">High-level design</h4>
<ul>
<li>Popular video content is streamed from CDN</li>
<li>Video encoding (<strong>transcoding</strong>) is the process of converting a video format to other formats (MPEG, HLS) to provide the best stream possible on multiple devices and bandwidth</li>
<li>A message queue can be configured between services for parallelism and improved fault tolerance
Codecs (H.264, VP9, HEVC) are compression and decompression algorithms used to reduce video file size while preserving video quality</li>
<li>The popular video streaming protocols (data transfer standard) are <strong>MPEG-DASH</strong> (Moving Pictures Experts Group - Dynamic Adaptive Streaming over HTTP), <strong>Apple HLS</strong> (HTTP Live Streaming), <strong>Microsoft Smooth Streaming</strong>, and <strong>Adobe HDS</strong> (HTTP Dynamic Streaming)</li>
</ul>
<hr>
<h4 id="video-upload-workflow">Video upload workflow</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/youtube/youtube-upload-path.webp" title="YouTube; Video upload workflow" data-thumbnail="/system-design-interview-cheatsheet/youtube/youtube-upload-path.webp" data-sub-html="<h2>YouTube; Video upload workflow</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/youtube/youtube-upload-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/youtube/youtube-upload-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/youtube/youtube-upload-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/youtube/youtube-upload-path.webp 2x" data-sizes="auto" alt="YouTube; Video upload workflow" width="916" height="867"/>
    </a><figcaption class="image-caption">YouTube; Video upload workflow</figcaption>
    </figure>
<ol>
<li>The user (<strong>client</strong>) executes a DNS query to identify the server</li>
<li>The client makes an HTTP connection to the load balancer</li>
<li>The video upload requests are rate limited to prevent malicious clients</li>
<li>The load balancer delegates the client&rsquo;s request to an API server (<strong>web server</strong>) with free capacity</li>
<li>The web server delegates the client&rsquo;s request to an app server that handles the API endpoint</li>
<li>The ID of the uploaded video is stored on the message queue for asynchronous processing of the video file</li>
<li>The title and description (<strong>metadata</strong>) of the video are stored in the metadata database</li>
<li>The app server queries the object store service to generate a pre-signed URL for storing the raw video file</li>
<li>The client uploads the raw video file directly to the object store using the pre-signed URL to save the system network bandwidth</li>
<li>The transcoding servers query the message queue using the publish-subscribe pattern to get notified on uploaded videos</li>
<li>The transcoding server fetches the raw video file by querying the raw object store</li>
<li>The transcoding server transcodes the raw video file into multiple codecs and stores the transcoded content on the transcoded object store</li>
<li>The thumbnail server generates on average five thumbnail images for each video file and stores the generated images on the thumbnail store</li>
<li>The transcoding server persists the ID of the transcoded video on the message queue for further processing</li>
<li>The upload handler service queries the message queue through the publish-subscribe pattern to get notified on transcoded video files</li>
<li>The upload handler service updates the metadata database with metadata of transcoded video files</li>
<li>The upload handler service queries the notification service to notify the client of the video processing status</li>
<li>The database can be partitioned through <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">consistent hashing</a> (key = user ID or video ID)</li>
<li><a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Block-matching_algorithm" target="_blank" rel="noopener noreffer ">Block matching</a> or <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Phase_correlation" target="_blank" rel="noopener noreffer ">Phase correlation</a> algorithms can be used to detect the duplicate video content</li>
<li>The web server (API server) must be kept stateless for scaling out through replication</li>
<li>The video file is stored in multiple resolutions and formats in order to support multiple devices and bandwidth</li>
<li>The video can be split into smaller chunks by the client before upload to support the resume of broken uploads</li>
<li>Watermarking and encryption can be used to protect video content</li>
<li>The data centers are added to improve latency and data recovery at the expense of increased maintenance workflows</li>
<li>Dead letter queue can be used to improve fault tolerance and error handling</li>
<li>Chaos engineering is used to identify the failures in networks, servers, and applications</li>
<li>Load testing and chaos engineering are used to improve fault tolerance</li>
<li><a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/RAID" target="_blank" rel="noopener noreffer ">RAID</a> configuration improves the hardware throughput</li>
<li>The data store is partitioned to spread the writes and reads at the expense of difficult joins, transactions, and fat client</li>
<li>Federation and sharding are used to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/scalable-software-architecture" target="_blank" rel="noopener noreffer ">scale out</a> the database</li>
<li>The write requests are redirected to the leader and the read requests are redirected to the followers of the database</li>
<li><a href="https://web.archive.org/web/20240108015800/https://vitess.io/" target="_blank" rel="noopener noreffer ">Vitess</a> is a storage middleware for scaling out MySQL</li>
<li>Vitess redirects the read requests that require fresh data to the leader (For example, update user profile operation)</li>
<li>Vitess uses a lock server (Apache Zookeeper) for automatic sharding and leader election on the database layer</li>
<li>Vitess supports RPC-based joins, indexing, and transactions on SQL database</li>
<li>Vitess allows to offload of partitioning logic from the application and improves database queries by caching</li>
</ol>
<hr>
<h4 id="video-streaming-workflow">Video streaming workflow</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/youtube/youtube-stream-path.webp" title="YouTube; Video stream workflow" data-thumbnail="/system-design-interview-cheatsheet/youtube/youtube-stream-path.webp" data-sub-html="<h2>YouTube; Video stream workflow</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/youtube/youtube-stream-path.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/youtube/youtube-stream-path.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/youtube/youtube-stream-path.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/youtube/youtube-stream-path.webp 2x" data-sizes="auto" alt="YouTube; Video stream workflow" width="933" height="755"/>
    </a><figcaption class="image-caption">YouTube; Video stream workflow</figcaption>
    </figure>
<ol>
<li>The client executes a DNS query to identify the server</li>
<li>The client makes an HTTP connection on the load balancer</li>
<li>The CDN is queried to verify if the requested video content is on the CDN cache</li>
<li>The <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/cdn-explained" target="_blank" rel="noopener noreffer ">CDN</a> queries the transcoded object store on a cache miss</li>
<li>The load balancer delegates the client&rsquo;s request to a web server with free capacity using the weighted round-robin algorithm</li>
<li>The web server delegates the client&rsquo;s request to an app server using <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">consistent hashing</a></li>
<li>The app server queries the metadata cache to fetch the metadata of the video</li>
<li>The app server queries the metadata database on a cache miss</li>
<li>The app server queries the thumbnail store to fetch the relevant thumbnail images of the video</li>
<li>The app server queries the transcoded object store to fetch the video content</li>
<li>The app server delegates the search queries of the client to the inverted index store</li>
<li>The read and write traffic are segregated for high throughput</li>
<li>Popular video content is streamed from CDN (in memory)</li>
<li>The push CDN model can be used for caching videos uploaded by users with a significant number of subscribers</li>
<li>The moderately streamed video content can be served from the video server directly (disk IO)</li>
<li><a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">Consistent hashing</a> can be used to load balance cache servers</li>
<li>Caching can be implemented on multiple levels to improve latency</li>
<li>LRU cache eviction policy can be used</li>
<li>Entropy or jitter is implemented on cache expiration to prevent the thundering herd failure</li>
<li>The video files are distributed to the data centers closer to the client when the client starts streaming</li>
<li>The traffic should be prioritized between the video streaming cluster (higher priority) and the general cluster to improve reliability</li>
<li>The videos can be recommended to the client based on geography, watch history (<a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm" target="_blank" rel="noopener noreffer ">KNN algorithm</a>), and <a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/A/B_testing" target="_blank" rel="noopener noreffer ">A/B testing</a> results</li>
<li>The video file is split into chunks for streaming and improved fault tolerance</li>
<li>The chunks of a video file are joined together when the client starts streaming</li>
<li>The video chunks allow adaptive streaming by switching to lower-quality chunks if the high-quality chunks are slower to download</li>
<li>Different streaming protocols support different video encodings and playback players</li>
<li>The video content is streamed on TCP through buffering</li>
<li>The video offset is stored on the server to resume playback from any client device</li>
<li>The video resolution on playback depends on the client&rsquo;s device</li>
<li>The video file should be encoded into compatible bitrates (quality) and formats for smoother streaming and compatibility</li>
<li>The counter for likes on a video can be non-accurate to improve performance (transactions executed at sampled intervals)</li>
<li>The comments on video content are shown to the comment owner by data fetching from the leader (database) while other users can fetch from followers with a slight delay</li>
<li>The services can be prescaled for extremely popular channels as autoscaling might not meet the requirements of concurrent clients</li>
<li>The autoscaling requirements can be predicted by performing machine learning on traffic patterns</li>
<li>The autoscaling service should keep a time buffer due to the anticipated delays in the provisioning of resources</li>
<li>Fully baked container images (no additional script execution required after provisioning) improve the startup time of services</li>
<li>The infrastructure can be prewarmed before the peak hours using benchmark data through load testing</li>
<li>The emergency mode should shut down non-critical services to free up resources, and skip the execution of failed services for improved reliability</li>
</ol>
<hr>
<hr>
<hr>
<h4 id="further-system-design-learning-resources-16">Further system design learning resources</h4>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<h3 id="dropbox">Dropbox</h3>
<p>The popular file hosting services are the following:</p>
<ul>
<li>Dropbox</li>
<li>Google Drive</li>
<li>OneDrive</li>
<li>iCloud</li>
</ul>
<hr>
<h4 id="requirements-15">Requirements</h4>
<ul>
<li>The <strong>client</strong> (user) can upload and download files on any device</li>
<li>The client can share files or directories with other clients</li>
<li>The client can edit the files while offline</li>
<li>The file changes are automatically synchronized across devices</li>
<li>The operations on files are ACID compliant</li>
</ul>
<hr>
<h4 id="data-storage-15">Data storage</h4>
<h5 id="database-schema-15">Database schema</h5>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/dropbox/dropbox-database-schema.webp" title="Dropbox; Database schema" data-thumbnail="/system-design-interview-cheatsheet/dropbox/dropbox-database-schema.webp" data-sub-html="<h2>Dropbox; Database schema</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/dropbox/dropbox-database-schema.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/dropbox/dropbox-database-schema.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/dropbox/dropbox-database-schema.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/dropbox/dropbox-database-schema.webp 2x" data-sizes="auto" alt="Dropbox; Database schema" width="1004" height="589"/>
    </a><figcaption class="image-caption">Dropbox; Database schema</figcaption>
    </figure>
<ul>
<li>The <strong>ACL</strong> (access control list) table is used to define file permissions</li>
<li>The relationship between the users and the devices tables is 1-to-many</li>
<li>The relationship between the users and the ACL tables is 1-to-many</li>
<li>The relationship between the files and the ACL tables is 1-to-many</li>
<li>The relationship between the workspace and the files tables is 1-to-many</li>
<li>The relationship between the files and the file_versions tables is 1-to-many</li>
<li>The relationship between the file_versions and the blocks tables is 1-to-many</li>
</ul>
<hr>
<h5 id="type-of-data-store-15">Type of data store</h5>
<ul>
<li>An embedded SQL database such as <a href="https://web.archive.org/web/20240108015800/https://www.sqlite.org/index.html" target="_blank" rel="noopener noreffer ">SQLite</a> can be used as the metadata database on the client</li>
<li>A SQL database such as MySQL stores the metadata on users, and files</li>
<li>A cache server such as Redis stores the metadata and file blocks of frequently accessed files</li>
<li>An object store can be used to store the file blocks</li>
<li>The message queue such as Apache Kafka is used for synchronization across devices using the request-response pattern</li>
</ul>
<hr>
<h4 id="high-level-design-15">High-level design</h4>
<ul>
<li>The files are chunked into blocks of size 4 MB for storage</li>
<li>The device-A of the client uploads file blocks and commits the metadata</li>
<li>A long polling connection is maintained by device-B of the client to get notified of any file changes</li>
<li>The device-B of the client fetches the updated metadata and the relevant file blocks</li>
<li>Only the updated file blocks should be transferred to save bandwidth</li>
</ul>
<hr>
<h4 id="upload-workflow">Upload workflow</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/dropbox/dropbox-upload-workflow.webp" title="Dropbox; Write Path" data-thumbnail="/system-design-interview-cheatsheet/dropbox/dropbox-upload-workflow.webp" data-sub-html="<h2>Dropbox; Write Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/dropbox/dropbox-upload-workflow.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/dropbox/dropbox-upload-workflow.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/dropbox/dropbox-upload-workflow.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/dropbox/dropbox-upload-workflow.webp 2x" data-sizes="auto" alt="Dropbox; Write Path" width="1303" height="1035"/>
    </a><figcaption class="image-caption">Dropbox; Write Path</figcaption>
    </figure>
<ol>
<li>The client creates an HTTP connection on the load balancer to upload the file</li>
<li>The load balancer delegates the client&rsquo;s HTTP connection to a web server with free capacity using round robin algorithm</li>
<li>The web server delegates the file upload request to the block service</li>
<li>The block service persists the file blocks on the block data store</li>
<li>The web server delegates the file metadata change request to the metadata service</li>
<li>The metadata service persists the modified metadata on the metadata database</li>
<li>The metadata service puts a message on the message queue to notify other devices of the client of file changes</li>
<li><a href="https://web.archive.org/web/20240108015800/https://en.wikipedia.org/wiki/Optimistic_concurrency_control" target="_blank" rel="noopener noreffer ">Optimistic locking</a> can be used for concurrent updates on the same file</li>
<li>The metadata database stores the metadata of the user and the file blocks (useful for offline editing)</li>
<li>The metadata database can be partitioned using <a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" target="_blank" rel="noopener noreffer ">consistent hashing</a> (key = user-id or file-id)</li>
<li>The file deduplication can be performed inline optimally by the client through hashing of the file blocks</li>
<li>Alternatively, the server can perform the deduplication of file blocks at the expense of increased bandwidth and storage</li>
<li>The file conflicts on concurrent writes can be resolved through the last-write-wins policy or manual resolution by the client</li>
<li>The least recently accessed files can be archived and moved to a cold data store to save storage</li>
<li>The client&rsquo;s indexer service updates the internal metadata database</li>
<li>The client&rsquo;s chunker service splits the file into blocks and each block is identified by a unique hash value</li>
<li>The client&rsquo;s metadata database contains metadata on the files, file chunks, file versions, and the file path</li>
<li>The file versioning can be implemented using SHA-256 hash or checksum on files</li>
<li>The file blocks are compressed using gzip or bzip2 to save storage and bandwidth</li>
<li>The client encrypts the file blocks using the 128-bit AES algorithm</li>
<li>The client uploads file patches on small changes to files</li>
<li>Exponential backoff is used to improve fault tolerance</li>
<li>The block data store is replicated to improve availability and durability</li>
</ol>
<hr>
<h4 id="download-workflow">Download workflow</h4>
<figure><a class="lightgallery" href="/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/dropbox/dropbox-download-workflow.webp" title="Dropbox; Read Path" data-thumbnail="/system-design-interview-cheatsheet/dropbox/dropbox-download-workflow.webp" data-sub-html="<h2>Dropbox; Read Path</h2>">
        <img class="lazyload" src="/web/20240108015800im_/https://systemdesign.one/svg/loading.min.svg" data-src="/system-design-interview-cheatsheet/dropbox/dropbox-download-workflow.webp" data-srcset="/web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/dropbox/dropbox-download-workflow.webp, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/dropbox/dropbox-download-workflow.webp 1.5x, /web/20240108015800im_/https://systemdesign.one/system-design-interview-cheatsheet/dropbox/dropbox-download-workflow.webp 2x" data-sizes="auto" alt="Dropbox; Read Path" width="1327" height="1044"/>
    </a><figcaption class="image-caption">Dropbox; Read Path</figcaption>
    </figure>
<ol>
<li>The client executes a DNS query to resolve the domain name</li>
<li>The client queries the <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/cdn-explained" target="_blank" rel="noopener noreffer ">CDN</a> to check if the most frequently accessed files are on the cache</li>
<li>The client initiates an HTTP connection on the load balancer to fetch the file</li>
<li>The load balancer delegates the client&rsquo;s HTTP connection to a web server with free capacity</li>
<li>A long polling connection is maintained by the client to get notified of any file changes in real-time</li>
<li>The notification service queries the message queue for any file changes using the request-response pattern</li>
<li>The web server queries the metadata service to fetch the modified metadata on any file changes</li>
<li>The metadata service queries the metadata cache</li>
<li>The metadata database is queried on a cache miss</li>
<li>The web server queries the block service to fetch the modified file blocks</li>
<li>The block service queries the block cache</li>
<li>The block data store is queried on a cache miss</li>
<li>The block service queries the preview service to fetch the preview (screenshot) of the files</li>
<li>The preview service asynchronously queries the block store to generate a preview of the stored files</li>
<li>The preview service queries the preview cache to fetch the preview of recently accessed files</li>
<li>The preview data store is queried on a cache miss</li>
<li>LRU cache eviction policy can be used for cache servers</li>
<li>The cached previews are stored in an encrypted format for security</li>
<li>Thin clients such as mobile users can perform on-demand synchronization with remote servers to save bandwidth</li>
<li>The client can use long polling, HTTP/2, or SSE to receive updates from the server in real-time</li>
<li>The notification service can be implemented using the request-response pattern on the message queue</li>
<li>The request queue is a global queue that receives updates from all devices while the response queues are dedicated to each device and the messages are removed on delivery</li>
<li>A local search index is generated for searching the files</li>
<li>The ACL table is modified when the user shares a file with another user</li>
<li>The client&rsquo;s watcher service detects file changes on the workspace for automated synchronization</li>
<li>The client&rsquo;s indexer service communicates with the remote notification service</li>
<li>The client&rsquo;s chunker service joins the file blocks on the read operation to reconstruct the file</li>
</ol>
<hr>
<hr>
<hr>
<h2 id="support">Support</h2>
<p>If you enjoy the blog and would like to support my work, you can make a one-time donation on <a href="https://web.archive.org/web/20240108015800/https://ko-fi.com/systemdesign" target="_blank" rel="noopener noreffer ">Ko-fi</a> or <a href="https://web.archive.org/web/20240108015800/https://www.buymeacoffee.com/systemdesignone" target="_blank" rel="noopener noreffer ">Buy Me a Coffee</a> or become a Patron on <a href="https://web.archive.org/web/20240108015800/https://patreon.com/systemdesign" target="_blank" rel="noopener noreffer ">Patreon</a>. Your support will help me continue to create quality content and bring new ideas to the blog. Thank you for your generosity!</p>
<hr>
<p>If you know somebody who wants to upskill in system design, <strong>share this article</strong> with them so they can also grow.</p>
<hr>
<hr>
<hr>
<h2 id="what-to-learn-next">What to learn next?</h2>
<p>Consider subscribing to <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/" target="_blank" rel="noopener noreffer ">System Design Newsletter</a>:</p>
<ul>
<li>Simplified <em>weekly</em> system design case studies</li>
<li>Powerful <em>template</em> to approach system design for FREE</li>
<li>Get a <em>feed</em> of posts on the website</li>
</ul>
<div class="newsletter-container">
<iframe loading="lazy" class="newsletter-responsive-iframe" title="System Design Newsletter" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" scrolling="no"></iframe>
</div>
<hr>
<hr>
<hr>
<p>Books are a powerful medium to gather new knowledge. Check out the following books to set yourself up for success in the <a href="https://web.archive.org/web/20240108015800/https://newsletter.systemdesign.one/p/design-system-newsletter" target="_blank" rel="noopener noreffer ">system design interview</a>:</p>
<ul>
<li><a href="https://web.archive.org/web/20240108015800/https://amzn.to/40tlRDt" target="_blank" rel="noopener noreffer ">Designing Data-Intensive Applications</a> by Martin Kleppmann</li>
<li><a href="https://web.archive.org/web/20240108015800/https://amzn.to/3G0MN5o" target="_blank" rel="noopener noreffer ">System Design Interview — An insider’s guide Volume 1</a> by Alex Xu</li>
<li><a href="https://web.archive.org/web/20240108015800/https://amzn.to/3BKMngO" target="_blank" rel="noopener noreffer ">System Design Interview — An insider’s guide Volume 2</a> by Alex Xu</li>
<li><a href="https://web.archive.org/web/20240108015800/https://amzn.to/3FGPjft" target="_blank" rel="noopener noreffer ">Hacking the System Design Interview</a> by Stanley Chiang</li>
</ul>
<hr>
<hr>
<h2 id="license">License</h2>
<p><a href="https://web.archive.org/web/20240108015800/https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" rel="noopener noreffer ">CC BY-NC-ND 4.0</a>: This license allows reusers to copy and distribute the content in this article in any medium or format in unadapted form only, for noncommercial purposes, and only so long as attribution is given to the creator. The original article must be backlinked.</p>
<hr>
<hr>
<hr>
<h2 id="useful-resources">Useful Resources</h2>
<ul>
<li><a href="https://web.archive.org/web/20240108015800/https://www.infoq.com/" target="_blank" rel="noopener noreffer ">infoq.com</a></li>
<li><a href="https://web.archive.org/web/20240108015800/https://github.com/donnemartin/system-design-primer" target="_blank" rel="noopener noreffer ">system design primer</a>, GitHub.com</li>
<li><a href="https://web.archive.org/web/20240108015800/https://leetcode.com/discuss/interview-question/system-design?currentPage=1&amp;orderBy=hot&amp;query=" target="_blank" rel="noopener noreffer ">leetcode discussions on system design</a>, leetcode.com</li>
<li><a href="https://web.archive.org/web/20240108015800/https://github.com/papers-we-love/papers-we-love" target="_blank" rel="noopener noreffer ">papers we love</a>, GitHub.com</li>
<li><a href="https://web.archive.org/web/20240108015800/https://www.w3schools.com/sql/default.asp" target="_blank" rel="noopener noreffer ">w3schools SQL Tutorial</a>, w3schools.com</li>
<li><a href="https://web.archive.org/web/20240108015800/https://roadmap.sh/system-design" target="_blank" rel="noopener noreffer ">system design</a>, roadmap.sh</li>
</ul></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-05-28</span>
            </div><div class="post-info-license">
                <span>CC BY-NC 4.0</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/" data-title="System Design Interview Cheat Sheet" data-via="systemdesign42"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on WhatsApp" data-sharer="whatsapp" data-url="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/" data-title="System Design Interview Cheat Sheet" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Pinterest" data-sharer="pinterest" data-url="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/" data-description="System Design Interview Questions" data-image="system-design-interview-cheatsheet/system-design-cheatsheet.webp"><i class="fab fa-pinterest fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Tumblr" data-sharer="tumblr" data-url="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/" data-title="System Design Interview Cheat Sheet" data-caption="System Design Interview Questions"><i class="fab fa-tumblr fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/" data-title="System Design Interview Cheat Sheet"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Reddit" data-sharer="reddit" data-url="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/"><i class="fab fa-reddit fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on VK" data-sharer="vk" data-url="https://web.archive.org/web/20240108015800/https://systemdesign.one/system-design-interview-cheatsheet/" data-title="System Design Interview Cheat Sheet" data-caption="System Design Interview Questions" data-image="system-design-interview-cheatsheet/system-design-cheatsheet.webp"><i class="fab fa-vk fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/web/20240108015800/https://systemdesign.one/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/web/20240108015800/https://systemdesign.one/consistent-hashing-explained/" class="prev" rel="prev" title="Consistent Hashing Explained"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Consistent Hashing Explained</a>
            <a href="/web/20240108015800/https://systemdesign.one/software-engineer-interview-learning-resources/" class="next" rel="next" title="Software Engineer Interview Learning Resources">Software Engineer Interview Learning Resources<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article>


<div id="newsletter-overlay-id" class="newsletter-overlay">
    <a class="newsletter-overlay-closebutton" onclick="closeOverlay()">&times;</a>

    <div class="newsletter-overlay-content">
        <h1>Join the System Design Journey</h1>
        <h4>with 30,000+ like-minded software engineers.</h4>

        <h3>Consider subscribing to System Design Newsletter:</h3>
        <div class="newsletter-overlay-container">
            <ul class="newsletter-overlay-benefits-list">
                <li>Simplified <i>weekly</i> system design case studies</li>
                <li>Powerful <i>template</i> to approach system design for FREE</li>
                <li>Get a <i>feed</i> of posts on the website</li>
            </ul>
        </div>


        <iframe loading="lazy" class="overlay-newsletter-responsive-iframe" src="https://web.archive.org/web/20240108015800if_/https://newsletter.systemdesign.one/embed" title="System Design Newsletter" width="480" height="320" frameborder="0" scrolling="no">
        </iframe>
    </div>
</div>

<script>
    const OVERLAY = "system_design_one_overlay";
    const TTL = 86400000; 
    const VERSION = "01";

    function closeOverlay() {
        setOverlayExpiry(OVERLAY, TTL, VERSION);
        document.getElementsByTagName('body')[0].style.overflow = "";
        document.getElementById("newsletter-overlay-id").style.display = "none";
    }

    function openOverlay() {
        document.getElementById("newsletter-overlay-id").style.display = "block";
        document.getElementsByTagName('body')[0].style.overflow = "hidden";
    }

    
    function setOverlayExpiry(key, ttl, version) {
        const now = new Date();
        const item = {
            version: version,
            expiry: now.getTime() + ttl,
        };
        localStorage.setItem(key, JSON.stringify(item));
    }

    function isOverlayExpired(key, version) {
        const itemStr = localStorage.getItem(key);
        
        if (!itemStr) {
            return true;
        }
        const item = JSON.parse(itemStr);
        const now = new Date();
        
        if (item.version !== version || now.getTime() > item.expiry) {
            
            
            localStorage.removeItem(key);
            return true;
        }
        return false;
    }

    window.onload = function () {
        if (isOverlayExpired(OVERLAY, VERSION) == true) {
            setTimeout(openOverlay, 60000); 
        }
    };

</script></div>
            </main><footer class="footer">
    <div class="footer-container"><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://web.archive.org/web/20240108015800/https://systemdesign.one/about/" target="_blank">NK</a></span>&nbsp;|&nbsp;<span class="privacy"><a rel="nofollow" href="https://web.archive.org/web/20240108015800/https://systemdesign.one/privacy-policy/" target="_blank">Privacy</a></span>&nbsp;|&nbsp;<span class="terms"><a rel="nofollow" href="https://web.archive.org/web/20240108015800/https://systemdesign.one/terms-of-service/" target="_blank">Terms</a></span></div>
    </div>
</footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/web/20240108015800cs_/https://systemdesign.one/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript" src="/web/20240108015800js_/https://systemdesign.one/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/web/20240108015800js_/https://systemdesign.one/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/web/20240108015800js_/https://systemdesign.one/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/web/20240108015800js_/https://systemdesign.one/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/web/20240108015800js_/https://systemdesign.one/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/web/20240108015800js_/https://systemdesign.one/lib/cookieconsent/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"cookieconsent":{"content":{"dismiss":"Got it!","href":"https://web.archive.org/web/20240108015800/https://systemdesign.one/cookie-policy/","link":"Learn more","message":"This website uses cookies."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"}};</script><script type="text/javascript" src="/web/20240108015800js_/https://systemdesign.one/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-ELC84BW3LQ', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://web.archive.org/web/20240108015800js_/https://www.googletagmanager.com/gtag/js?id=G-ELC84BW3LQ" async></script></body>
</html>
<!--
     FILE ARCHIVED ON 01:58:00 Jan 08, 2024 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 02:11:16 Mar 19, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  exclusion.robots: 1.895 (7)
  exclusion.robots.policy: 1.769 (7)
  cdx.remote: 0.831 (7)
  esindex: 0.099 (7)
  LoadShardBlock: 1012.337 (24)
  PetaboxLoader3.resolve: 409.837 (3)
  PetaboxLoader3.datanode: 519.95 (25)
  load_resource: 93.62
-->